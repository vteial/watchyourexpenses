(function(){function k(a){throw a;}var m=void 0,q=!0,r=null,s=!1;function aa(){return function(){}}function u(a){return function(){return this[a]}}function v(a){return function(){return a}}var x,z=this;
function ba(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function A(a){return a!==m}function B(a){return"array"==ba(a)}function ca(a){var b=ba(a);return"array"==b||"object"==b&&"number"==typeof a.length}function C(a){return"string"==typeof a}function da(a){return"boolean"==typeof a}function D(a){return"number"==typeof a}function ea(a){return"function"==ba(a)}function E(a){var b=typeof a;return"object"==b&&a!=r||"function"==b}function fa(a){return a[ga]||(a[ga]=++ha)}
var ga="closure_uid_"+(1E9*Math.random()>>>0),ha=0;function ia(a,b,c){return a.call.apply(a.bind,arguments)}function ja(a,b,c){a||k(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ka(a,b,c){ka=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ia:ja;return ka.apply(r,arguments)}function la(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var ma=Date.now||function(){return+new Date};
function na(a,b){var c=a.split("."),d=z;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==m?d[e]=b:d=d[e]?d[e]:d[e]={}}function F(a,b){function c(){}c.prototype=b.prototype;a.G=b.prototype;a.prototype=new c};function oa(a){Error.captureStackTrace?Error.captureStackTrace(this,oa):this.stack=Error().stack||"";a&&(this.message=String(a))}F(oa,Error);oa.prototype.name="CustomError";function pa(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var qa={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},ra={"'":"\\'"};
function sa(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=b,g=c+1,h;if(!(h=qa[d])){if(!(31<e&&127>e))if(d in ra)d=ra[d];else if(d in qa)d=ra[d]=qa[d];else{e=d;h=d.charCodeAt(0);if(31<h&&127>h)e=d;else{if(256>h){if(e="\\x",16>h||256<h)e+="0"}else e="\\u",4096>h&&(e+="0");e+=h.toString(16).toUpperCase()}d=ra[d]=e}h=d}f[g]=h}b.push('"');return b.join("")};var ta=Array.prototype,ua=ta.indexOf?function(a,b,c){return ta.indexOf.call(a,b,c)}:function(a,b,c){c=c==r?0:0>c?Math.max(0,a.length+c):c;if(C(a))return!C(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wa=ta.forEach?function(a,b,c){ta.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=C(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},xa=ta.map?function(a,b,c){return ta.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=C(a)?
a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};function ya(a,b){if(a.reduce)return a.reduce(b,0);var c=0;wa(a,function(d,e){c=b.call(m,c,d,e,a)});return c}var za=ta.some?function(a,b,c){return ta.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=C(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return q;return s};function Aa(a,b){var c=Ba(a,b,m);return 0>c?r:C(a)?a.charAt(c):a[c]}
function Ba(a,b,c){for(var d=a.length,e=C(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Ca(a){if(!B(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Da(a,b){var c=ua(a,b),d;(d=0<=c)&&ta.splice.call(a,c,1);return d}function Ea(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Fa(a,b){if(!ca(a)||!ca(b)||a.length!=b.length)return s;for(var c=a.length,d=Ga,e=0;e<c;e++)if(!d(a[e],b[e]))return s;return q}function Ga(a,b){return a===b};function Ha(a,b){for(var c=ca(b),d=c?b:arguments,c=c?0:1;c<d.length&&!(a=a[d[c]],!A(a));c++);return a}var Ia="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ja(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ia.length;f++)c=Ia[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var La="StopIteration"in z?z.StopIteration:Error("StopIteration");function Ma(){}Ma.prototype.a=function(){k(La)};Ma.prototype.fa=function(){return this};function Na(a){if(a instanceof Ma)return a;if("function"==typeof a.fa)return a.fa(s);if(ca(a)){var b=0,c=new Ma;c.a=function(){for(;;){b>=a.length&&k(La);if(b in a)return a[b++];b++}};return c}k(Error("Not implemented"))}
function Oa(a,b,c){if(ca(a))try{wa(a,b,c)}catch(d){d!==La&&k(d)}else{a=Na(a);try{for(;;)b.call(c,a.a(),m,a)}catch(e){e!==La&&k(e)}}}function Pa(a){if(ca(a))return Ea(a);a=Na(a);var b=[];Oa(a,function(a){b.push(a)});return b};function Qa(a,b){this.b={};this.a=[];var c=arguments.length;if(1<c){c%2&&k(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)Ra(this,arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof Qa)e=a.$(),d=a.Va();else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++)Ra(this,e[c],d[c])}}x=Qa.prototype;x.n=0;x.Wa=0;x.va=u("n");x.Va=function(){Sa(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};
x.$=function(){Sa(this);return this.a.concat()};x.clear=function(){this.b={};this.Wa=this.n=this.a.length=0};function Sa(a){if(a.n!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Object.prototype.hasOwnProperty.call(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.n!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Object.prototype.hasOwnProperty.call(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}
function Ra(a,b,c){Object.prototype.hasOwnProperty.call(a.b,b)||(a.n++,a.a.push(b),a.Wa++);a.b[b]=c}x.ta=function(){return new Qa(this)};x.fa=function(a){Sa(this);var b=0,c=this.a,d=this.b,e=this.Wa,f=this,g=new Ma;g.a=function(){for(;;){e!=f.Wa&&k(Error("The map has changed since the iterator was created"));b>=c.length&&k(La);var g=c[b++];return a?g:d[g]}};return g};var Ta,Ua,Va,Xa;function Ya(){return z.navigator?z.navigator.userAgent:r}Xa=Va=Ua=Ta=s;var Za;if(Za=Ya()){var $a=z.navigator;Ta=0==Za.indexOf("Opera");Ua=!Ta&&-1!=Za.indexOf("MSIE");Va=!Ta&&-1!=Za.indexOf("WebKit");Xa=!Ta&&!Va&&"Gecko"==$a.product}var ab=Ta,bb=Ua,cb=Xa,db=Va;function eb(){var a=z.document;return a?a.documentMode:m}var fb;
a:{var gb="",hb;if(ab&&z.opera)var ib=z.opera.version,gb="function"==typeof ib?ib():ib;else if(cb?hb=/rv\:([^\);]+)(\)|;)/:bb?hb=/MSIE\s+([^\);]+)(\)|;)/:db&&(hb=/WebKit\/(\S+)/),hb)var jb=hb.exec(Ya()),gb=jb?jb[1]:"";if(bb){var kb=eb();if(kb>parseFloat(gb)){fb=String(kb);break a}}fb=gb}var lb={};
function mb(a){var b;if(!(b=lb[a])){b=0;for(var c=String(fb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",l=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var p=l.exec(g)||["","",""],w=n.exec(h)||["","",""];if(0==p[0].length&&0==w[0].length)break;b=((0==p[1].length?0:parseInt(p[1],10))<(0==w[1].length?0:parseInt(w[1],10))?-1:(0==p[1].length?0:parseInt(p[1],10))>(0==w[1].length?
0:parseInt(w[1],10))?1:0)||((0==p[2].length)<(0==w[2].length)?-1:(0==p[2].length)>(0==w[2].length)?1:0)||(p[2]<w[2]?-1:p[2]>w[2]?1:0)}while(0==b)}b=lb[a]=0<=b}return b}var nb=z.document,ob=!nb||!bb?m:eb()||("CSS1Compat"==nb.compatMode?parseInt(fb,10):5);function pb(a){this.b=a}pb.prototype.a=r;pb.prototype.getName=u("b");function qb(){}function rb(){}var sb={},tb=r;function ub(a){tb||(tb=new pb(""),sb[""]=tb);var b;if(!(b=sb[a])){b=new pb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=ub(a.substr(0,c));c.a||(c.a={});c.a[d]=b;sb[a]=b}return b};function vb(a){return function(){k(a)}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function G(a,b){this.a=[];this.e=b||r}x=G.prototype;x.ua=s;x.wa=s;x.qb=s;x.kc=s;x.Xb=s;x.lc=0;x.Ob=function(a,b){this.qb=s;wb(this,a,b)};function wb(a,b,c){a.ua=q;a.b=c;a.wa=!b;xb(a)}function yb(a){a.ua&&(a.Xb||k(new zb),a.Xb=s)}function Ab(a,b){yb(a);wb(a,q,b)}function H(a,b){yb(a);wb(a,s,b)}x.S=function(a,b){return this.B(a,r,b)};x.Mb=function(a,b){return this.B(r,a,b)};x.jc=function(a,b){return this.B(a,a,b)};x.B=function(a,b,c){this.a.push([a,b,c]);this.ua&&xb(this);return this};
function Bb(a){return za(a.a,function(a){return ea(a[1])})}function xb(a){a.c&&(a.ua&&Bb(a))&&(z.clearTimeout(a.c),delete a.c);a.d&&(a.d.lc--,delete a.d);for(var b=a.b,c=s,d=s;a.a.length&&!a.qb;){var e=a.a.shift(),f=e[0],g=e[1],e=e[2];if(f=a.wa?g:f)try{var h=f.call(e||a.e,b);A(h)&&(a.wa=a.wa&&(h==b||h instanceof Error),a.b=b=h);b instanceof G&&(d=q,a.qb=q)}catch(l){b=l,a.wa=q,Bb(a)||(c=q)}}a.b=b;d&&(b.B(ka(a.Ob,a,q),ka(a.Ob,a,s)),b.kc=q);c&&(a.c=z.setTimeout(vb(b),0))}
function Cb(a){var b=new G;Ab(b,a);return b}function zb(){oa.call(this)}F(zb,oa);zb.prototype.message="Deferred has already fired";zb.prototype.name="AlreadyCalledError";function Db(){return new G}var Eb={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},Fb=z.IDBRequest&&"LOADING"in z.IDBRequest?z.IDBTransaction:z.webkitIDBRequest&&"LOADING"in z.webkitIDBRequest&&1===z.webkitIDBTransaction.READ_WRITE?z.webkitIDBTransaction:Eb,I=Fb.READ_ONLY,L=Fb.READ_WRITE,Gb=Fb.VERSION_CHANGE;function Hb(a,b){return a?b?"prevunique":"prev":b?"nextunique":"next"};function Jb(a,b){var c,d;2==arguments.length&&C(arguments[1])?(c=q,d=arguments[1].split(".")):d=(c=ca(b))?b:arguments;for(c=c?0:1;c<d.length&&!(a=a[d[c]],!A(a));c++);return a}var Kb={};
function Lb(a){var b=[a];a=new Mb;for(var c=0,d,e;(e=b.pop())!==m;){0===c%4&&12<c+4&&(a.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){b.push(Kb);for(d=e.length;d--;)b.push(e[d]);continue}else a.write(c);else if("number"===d)c+=1,a.write(c),Nb(a,e);else if(e instanceof Date)c+=2,a.write(c),Nb(a,e.valueOf());else if("string"===d){c+=3;a.write(c);c=a;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,f>>2|
255,(f|3)<<6)}c.write(0)}else if(e===Kb)a.write(0);else return"";c=0}for(b=a.a.length;"00"===a.a[--b];);a.a.length=++b;return a.toString()}function Ob(a){for(var b=[],c=b,d=[],e,f,g=new Pb(a);Qb(g)!=r;)if(0===g.a)c=d.pop();else{if(g.a===r)break;do{e=g.a/4|0;a=g.a%4;for(var h=0;h<e;h++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<g.a+4)Qb(g);else break}while(1);1===a?c.push(Rb(g)):2===a?c.push(new Date(Rb(g))):3===a?c.push(Sb(g)):0===a&&(c=d.pop())}return b[0]}
function Nb(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function Rb(a){var b=Qb(a)|0,c=b>>7?s:q,d=c?-1:1,e=(b&127)<<4,b=Qb(a)|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(Qb(a)|0):Qb(a)|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function Sb(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=Qb(a);if(0===f||f==r)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function Pb(a){this.a=r;this.b=a;this.c=this.b.length-1;this.index=-1}function Qb(a){return a.a=a.index<a.c?parseInt(a.b[++a.index]+a.b[++a.index],16):r}function Mb(){this.a=[];this.b=m}
Mb.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.b=arguments[b].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)};Mb.prototype.toString=function(){return this.a.length?this.a.join(""):""};function Tb(a,b){var c=Lb(a),d=Lb(b);return c>d?1:c==d?0:-1};function Ub(){0!=Vb&&(Wb[fa(this)]=this)}var Vb=0,Wb={};Ub.prototype.Rb=s;Ub.prototype.za=function(){if(!this.Rb&&(this.Rb=q,this.ka(),0!=Vb)){var a=fa(this);delete Wb[a]}};Ub.prototype.ka=function(){if(this.Sb)for(;this.Sb.length;)this.Sb.shift()()};var Xb=!bb||bb&&9<=ob,Yb=bb&&!mb("9");!db||mb("528");cb&&mb("1.9b")||bb&&mb("8")||ab&&mb("9.5")||db&&mb("528");cb&&!mb("8")||bb&&mb("9");function Zb(a,b){this.type=a;this.a=this.target=b}Zb.prototype.za=aa();Zb.prototype.b=s;Zb.prototype.d=q;Zb.prototype.preventDefault=function(){this.d=s};function $b(a){$b[" "](a);return a}$b[" "]=aa();function ac(a,b){a&&bc(this,a,b)}F(ac,Zb);ac.prototype.target=r;ac.prototype.c=r;function bc(a,b,c){var d=a.type=b.type;Zb.call(a,d);a.target=b.target||b.srcElement;a.a=c;if((c=b.relatedTarget)&&cb)try{$b(c.nodeName)}catch(e){}a.c=b;b.defaultPrevented&&a.preventDefault();delete a.b}ac.prototype.preventDefault=function(){ac.G.preventDefault.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=s,Yb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var cc="closure_listenable_"+(1E6*Math.random()|0),dc=0;function ec(a,b,c,d,e,f){this.aa=a;this.a=b;this.src=c;this.type=d;this.capture=!!e;this.Xa=f;this.key=++dc;this.K=this.ga=s}ec.prototype.handleEvent=function(a){return this.aa.call(this.Xa||this.src,a)};var fc={},gc={},hc={},ic={};
function jc(a,b,c,d,e){if(B(b))for(var f=0;f<b.length;f++)jc(a,b[f],c,d,e);else if(c=kc(c),a&&a[cc]){f=c;c=a.e[b]||(a.e[b]=[]);var g=lc(c,f,d,e);-1<g?(a=c[g],a.ga=s):(a=new ec(f,r,a,b,!!d,e),a.ga=s,c.push(a))}else a:{b||k(Error("Invalid event type"));d=!!d;var h=gc;b in h||(h[b]={n:0,Q:0});h=h[b];d in h||(h[d]={n:0,Q:0},h.n++);h=h[d];f=fa(a);h.Q++;if(h[f])for(var g=h[f],l=0;l<g.length;l++){if(h=g[l],h.aa==c&&h.Xa==e){if(h.K)break;g[l].ga=s;break a}}else g=h[f]=[],h.n++;l=mc();h=new ec(c,l,a,b,d,e);
h.ga=s;l.src=a;l.aa=h;g.push(h);hc[f]||(hc[f]=[]);hc[f].push(h);a.addEventListener?a.addEventListener(b,l,d):a.attachEvent(b in ic?ic[b]:ic[b]="on"+b,l);fc[h.key]=h}}function mc(){var a=nc,b=Xb?function(c){return a.call(b.src,b.aa,c)}:function(c){c=a.call(b.src,b.aa,c);if(!c)return c};return b}
function oc(a,b,c,d,e){if(B(b))for(var f=0;f<b.length;f++)oc(a,b[f],c,d,e);else if(c=kc(c),a&&a[cc])b in a.e&&(a=a.e[b],c=lc(a,c,d,e),-1<c&&(e=a[c],delete fc[e.key],e.K=q,ta.splice.call(a,c,1)));else{d=!!d;a:{f=gc;if(b in f&&(f=f[b],d in f&&(f=f[d],a=fa(a),f[a]))){a=f[a];break a}a=r}if(a)for(f=0;f<a.length;f++)if(a[f].aa==c&&a[f].capture==d&&a[f].Xa==e){pc(a[f]);break}}}
function pc(a){if(!D(a)&&a&&!a.K){var b=a.src;if(b&&b[cc])qc(b,a);else{var c=a.type,d=a.a,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in ic?ic[c]:ic[c]="on"+c,d);b=fa(b);hc[b]&&(d=hc[b],Da(d,a),0==d.length&&delete hc[b]);a.K=q;if(d=gc[c][e][b])d.Vb=q,rc(c,e,b,d);delete fc[a.key]}}}
function rc(a,b,c,d){if(!d.$a&&d.Vb){for(var e=0,f=0;e<d.length;e++)d[e].K?d[e].a.src=r:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Vb=s;0==f&&(delete gc[a][b][c],gc[a][b].n--,0==gc[a][b].n&&(delete gc[a][b],gc[a].n--),0==gc[a].n&&delete gc[a])}}function sc(a,b,c,d,e){var f=1;b=fa(b);if(a[b]){var g=--a.Q,h=a[b];h.$a?h.$a++:h.$a=1;try{for(var l=h.length,n=0;n<l;n++){var p=h[n];p&&!p.K&&(f&=tc(p,e)!==s)}}finally{a.Q=Math.max(g,a.Q),h.$a--,rc(c,d,b,h)}}return Boolean(f)}
function tc(a,b){a.ga&&pc(a);return a.handleEvent(b)}
function nc(a,b){if(a.K)return q;var c=a.type,d=gc;if(!(c in d))return q;var d=d[c],e,f;if(!Xb){var g;if(!(g=b))a:{g=["window","event"];for(var h=z;e=g.shift();)if(h[e]!=r)h=h[e];else{g=r;break a}g=h}e=g;g=q in d;h=s in d;if(g){if(0>e.keyCode||e.returnValue!=m)return q;a:{var l=s;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(n){l=q}if(l||e.returnValue==m)e.returnValue=q}}l=new ac;bc(l,e,this);e=q;try{if(g){for(var p=[],w=l.a;w;w=w.parentNode)p.push(w);f=d[q];f.Q=f.n;for(var t=p.length-1;!l.b&&0<=
t&&f.Q;t--)l.a=p[t],e&=sc(f,p[t],c,q,l);if(h){f=d[s];f.Q=f.n;for(t=0;!l.b&&t<p.length&&f.Q;t++)l.a=p[t],e&=sc(f,p[t],c,s,l)}}else e=tc(a,l)}finally{p&&(p.length=0)}return e}c=new ac(b,this);return e=tc(a,c)}var uc="__closure_events_fn_"+(1E9*Math.random()>>>0);function kc(a){return ea(a)?a:a[uc]||(a[uc]=function(b){return a.handleEvent(b)})};function vc(){Ub.call(this);this.e={};this.qc=this}F(vc,Ub);vc.prototype[cc]=q;vc.prototype.t=r;vc.prototype.rc=function(a,b,c,d){jc(this,a,b,c,d)};vc.prototype.removeEventListener=function(a,b,c,d){oc(this,a,b,c,d)};
function wc(a,b){var c,d=a.t;if(d)for(c=[];d;d=d.t)c.push(d);var d=a.qc,e=b,f=e.type||e;if(C(e))e=new Zb(e,d);else if(e instanceof Zb)e.target=e.target||d;else{var g=e,e=new Zb(f,d);Ja(e,g)}var g=q,h;if(c)for(var l=c.length-1;!e.b&&0<=l;l--)h=e.a=c[l],g=xc(h,f,q,e)&&g;e.b||(h=e.a=d,g=xc(h,f,q,e)&&g,e.b||(g=xc(h,f,s,e)&&g));if(c)for(l=0;!e.b&&l<c.length;l++)h=e.a=c[l],g=xc(h,f,s,e)&&g}
vc.prototype.ka=function(){vc.G.ka.call(this);var a=0,b;for(b in this.e){for(var c=this.e[b],d=0;d<c.length;d++)++a,delete fc[c[d].key],c[d].K=q;c.length=0}this.t=r};function qc(a,b){var c=b.type;c in a.e&&Da(a.e[c],b)&&(delete fc[b.key],b.K=q)}function xc(a,b,c,d){if(!(b in a.e))return q;var e=q;b=Ea(a.e[b]);for(var f=0;f<b.length;++f){var g=b[f];g&&(!g.K&&g.capture==c)&&(g.ga&&qc(a,g),e=g.handleEvent(d)!==s&&e)}return e&&d.d!=s}
function lc(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(f.aa==b&&f.capture==!!c&&f.Xa==d)return e}return-1};function yc(a,b,c){ea(a)?c&&(a=ka(a,c)):a&&"function"==typeof a.handleEvent?a=ka(a.handleEvent,a):k(Error("Invalid listener argument"));2147483647<b||z.setTimeout(a,b||0)};function zc(a,b,c){var d;E(a)?(d=a.store,b=a.id,a.parent!=r&&(c=new zc(a.parent))):A(b)?d=a:(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new zc(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],A(b)||k(Error("Invalid key value: "+a)));this.a=d;this.id=b;this.parent=c||r}x=zc.prototype;x.toJSON=function(){var a={store:this.a,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};x.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.a+"^:"+this.id};
x.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};x.Lc=u("a");x.mc=u("id");x.Kc=u("parent");function Ac(a){if(ca(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function M(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d}M.prototype.lower=m;M.prototype.upper=m;M.prototype.toJSON=function(){return Bc(this)};function Cc(a){return new M(a,a,s,s)}function Dc(a,b,c,d){return new M(a,b,c,d)}function Ec(a,b){return new M(m,a,m,!!b)}function Fc(a,b){return new M(a,m,!!b,m)}function Gc(a){var b;B(a)?(b=Ea(a),b.push("\uffff")):C(a)?b=a+"\uffff":k(new N);return Dc(a,b,s,q)}
function Bc(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}function Hc(a){return a!=r?a.upper!=r&&a.lower!=r?Ic.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):a.upper!=r?Ic.upperBound(a.upper,a.upperOpen):a.lower!=r?Ic.lowerBound(a.lower,a.lowerOpen):r:r}
M.prototype.pb=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;if(a.lower!=r&&(this.lower==r||a.lower>=this.lower))b=a.lower,d=a.lowerOpen||this.lowerOpen;if(a.upper!=r&&(this.upper==r||a.upper<=this.upper))c=a.upper,e=a.upperOpen||this.upperOpen;return Dc(b,c,d,e)};
function Jc(a,b,c,d,e){if(c)if(!c.lowerOpen&&!c.upperOpen&&c.lower!=r&&c.upper!=r&&0===O(c.lower,c.upper))d.push(a+" = ?"),e.push(Kc(c.lower,b));else{if(c.lower!=r){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(Kc(c.lower,b))}c.upper!=r&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(Kc(c.upper,b)))}}
function Mc(a,b,c,d){var e,f,g,h;if("^"==a)return Gc(b);"<"==a||"<="==a?(e=b,g="<"==a):">"==a||">="==a?(f=b,h=">"==a):"="==a||"=="==a?e=f=b:k(new N("invalid op: "+a));"<"==c||"<="==c?(e=d,g="<"==c):">"==c||">="==c?(f=d,h=">"==c):A(c)&&k(new N("invalid op2: "+c));return Dc(f,e,h,g)}var Ic=z.IDBKeyRange||z.webkitIDBKeyRange||M;function N(a){oa.call(this,a);this.name="ydn.error.ArgumentException"}F(N,oa);function Nc(a){oa.call(this,a);this.name="ydn.error.NotSupportedException"}F(Nc,oa);function Oc(a){oa.call(this,a);this.name="ydn.error.NotImplementedException"}F(Oc,oa);function Pc(a){oa.call(this,a);this.name="ydn.error.InvalidOperationException"}F(Pc,oa);
function Qc(a){Error.captureStackTrace?Error.captureStackTrace(this,Qc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}F(Qc,Error);Qc.prototype.name="ydn.error.InternalError";function Rc(a,b,c,d,e){A(e)||(e=B(a)?a.join(", "):a);a!=r&&(!C(a)&&!ca(a))&&k(new N("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a));!A(a)&&A(e)&&(a=e);this.keyPath=a;this.d=ca(this.keyPath);this.name=e;this.type=Sc(b);A(b)&&(A(this.type)||k(new N("type invalid in index: "+this.name)),B(this.keyPath)&&k(new N('composite key for store "'+this.name+'" must not specified type')));this.unique=!!c;this.multiEntry=!!d;this.e=C(this.type)?this.type:Tc;this.b=C(e)?e:B(a)?this.keyPath.join(","):
a;this.a=sa(this.b);this.c=!this.d&&!this.multiEntry?this.keyPath.split("."):r}function Uc(a,b){if(b!=r){if(ca(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=Jb(b,a.keyPath[d]);c[d]=f}return c}return Jb(b,a.keyPath)}}function Vc(a,b,c){for(var d=0;d<a.c.length;d++)d==a.c.length-1?b[a.c[d]]=c:E(b[a.c[d]])||(b[a.c[d]]={})}var Tc="TEXT";function Kc(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return A(b)?a:Lb(a)}function Wc(a,b){return"DATE"==b?new Date(a):A(b)?a:Ob(a)}
var Xc=["BLOB","DATE","INTEGER","NUMERIC",Tc];function Sc(a){if(C(a))return a=ua(Xc,a),Xc[a]}Rc.prototype.getName=u("name");Rc.prototype.toJSON=function(){return{name:this.name,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};Rc.prototype.ta=function(){var a=B(this.keyPath)?Ea(this.keyPath):this.keyPath;return new Rc(a,this.type,this.unique,this.multiEntry,this.name)};
function Yc(a,b){return a==r&&b==r?r:a!=r?b!=r?ca(a)&&ca(b)?Fa(a,b)?r:"expect: "+a+", but: "+b:Zc(a,b)?r:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b}Rc.prototype.hint=function(a){if(!a)return this;var b=B(this.keyPath)?Ea(this.keyPath):this.keyPath,c=this.type;!A(a.type)&&"TEXT"==c&&(c=m);return new Rc(b,c,this.unique,this.multiEntry,a.name)};function $c(a,b,c,d,e,f,g){this.name=a;C(this.name)||k(new N("store name must be a string"));this.keyPath=A(b)?b:r;this.d=ca(this.keyPath);this.keyPath!==r&&(!C(this.keyPath)&&!this.d)&&k(new N("keyPath must be a string or array"));this.autoIncrement=c;var h;d!=r&&(h=Sc(d),A(h)||k(new N('type "'+d+'" for primary key in store "'+this.name+'" is invalid.')),this.d&&k(new N('composite key for store "'+this.name+'" must not specified type')));this.type=h!=r?h:this.autoIncrement?"INTEGER":m;this.c=C(this.keyPath)?
this.keyPath.split("."):[];this.indexes=e||[];this.Z=!!f;this.dc=!!g;this.e=C(this.type)?this.type:Tc;this.b=B(this.keyPath)?this.keyPath.join(","):C(this.keyPath)?this.keyPath:"_ROWID_";this.a=sa(this.b)}x=$c.prototype;x.Z=s;x.dc=s;x.toJSON=function(){for(var a=[],b=0;b<this.indexes.length;b++)a.push(this.indexes[b].toJSON());return{name:this.name,keyPath:this.keyPath,autoIncrement:this.autoIncrement,type:this.type,indexes:a}};
function ad(a){var b=[],c=a.indexes||[];if(B(c))for(var d=0;d<c.length;d++){var e=new Rc(c[d].keyPath,c[d].type,c[d].unique,c[d].multiEntry,c[d].name);A(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new $c(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?m:a.type,b,a.dispatchEvents,a.fixed)}
function bd(a,b,c,d,e,f,g){a=cd(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.ja;a.m&&(b+=" WHERE "+a.m);a.group&&(b+=" GROUP BY "+a.group);a.U&&(b+=" ORDER BY "+a.U);return b}
function cd(a,b,c,d,e,f,g){var h={select:"",ja:"",m:"",group:"",U:""},l=a.b,n=a.a,p=r;d!==l&&C(d)&&(p=dd(a,d));var w=!!p,t=d||l,y=sa(t),J=w?p.type:a.type,K=w&&p.multiEntry;h.ja=ed(a);3===c?h.select="COUNT("+n+")":1===c?(h.select=n,d!=r&&d!=l&&(h.select+=", "+y)):h.select="*";d=g?"DISTINCT ":"";l=[];K?(K=sa("ydn.db.me:"+a.getName()+":"+p.getName()),h.select=3===c?"COUNT("+d+K+"."+y+")":1===c?ed(a)+"."+n+", "+K+"."+y:ed(a)+".*, "+K+"."+y+" AS "+t,h.ja=K+" INNER JOIN "+ed(a)+" USING ("+n+")",e!=r&&(Jc(K+
"."+y,J,e,l,b),0<l.length&&(h.m=h.m?h.m+(" AND "+l.join(" AND ")):l.join(" AND ")))):e!=r&&(Jc(y,J,e,l,b),0<l.length&&(h.m=h.m?h.m+(" AND "+l.join(" AND ")):l.join(" AND ")));w&&(!p.unique&&g)&&(h.group=y);a=f?"DESC":"ASC";h.U=y+" "+a;w&&(h.U+=", "+n+" "+a);return h}x.ta=function(){return ad(this.toJSON())};x.index=function(a){return this.indexes[a]||r};function dd(a,b){return Aa(a.indexes,function(a){return a.name==b})}
function fd(a,b){for(var c=0;c<a.indexes.length;c++)if(!Yc(a.indexes[c].keyPath,b))return a.indexes[c];return r}function gd(a,b){return b==a.keyPath?q:za(a.indexes,function(a){return a.name==b})}function ed(a){return sa(a.name)}
x.hint=function(a){if(!a)return this;var b=this.autoIncrement,c=B(this.keyPath)?Ea(this.keyPath):this.keyPath,d=this.type,e=xa(this.indexes,function(a){return a.ta()});!A(a.type)&&"TEXT"==d&&(d=m);B(a.keyPath)&&(C(c)&&c==a.keyPath.join(","))&&(c=Ea(a.keyPath));for(var f=0,g=a.indexes.length;f<g;f++)if(a.indexes[f].d)for(var h=a.indexes[f].getName(),l=e.length-1;0<=l;l--)if(0<=h.indexOf(e[l].getName())){e[l]=a.indexes[f].ta();break}for(f=0;f<e.length;f++)(g=dd(a,e[f].getName()))&&(e[f]=e[f].hint(g));
return new $c(a.name,c,b,d,e)};x.getName=u("name");function hd(a){return!!a.keyPath}function id(a,b,c){if(!a.keyPath&&c!=r)return c;if(a.d){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(Jb(b,a.keyPath[d]));return c}if(a.keyPath)return Ha(b,a.c)}function jd(a,b,c){for(var d=0;d<a.c.length;d++){var e=a.c[d];if(d==a.c.length-1){b[e]=c;break}A(b[e])||(b[e]={});b=b[e]}}
function kd(a,b,c){var d=[],e=[];c=A(c)?c:id(a,b);A(c)&&(e.push(a.a),d.push(Kc(c,a.type)));for(var f=0;f<a.indexes.length;f++){var g=a.indexes[f];if(!g.multiEntry&&!(g.name===a.keyPath||"_default_"==g.name)){var h=Uc(g,b);h!=r&&(d.push(Kc(h,g.type)),e.push(g.a))}}a.dc||(d.push(Q(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Nb:e,Yb:a,A:d,key:c}}
function ld(a,b){if(!b)return"missing store: "+a.name;if(a.name!=b.name)return"store name, expect: "+a.name+", but: "+b.name;var c=Yc(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(A(a.autoIncrement)&&A(b.autoIncrement)&&a.autoIncrement!=b.autoIncrement)return"autoIncrement, expect:  "+a.autoIncrement+", but: "+b.autoIncrement;if(a.indexes.length!=b.indexes.length)return"indexes length, expect:  "+a.indexes.length+", but: "+b.indexes.length;if(A(a.type)&&A(b.type)&&(ca(a.type)?!Fa(a.type,b.type):
a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.indexes.length;c++){var d=dd(b,a.indexes[c].name),e;e=a.indexes[c];if(d)if(e.name!=d.name)e="name, expect: "+e.name+", but: "+d.name;else{var f=Yc(e.keyPath,d.keyPath);e=f?"keyPath, "+f:e.unique!=r&&d.unique!=r&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:e.multiEntry!=r&&d.multiEntry!=r&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:A(e.type)&&A(d.type)&&
(ca(e.type)?!Fa(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+e.name;if(0<e.length)return'index "'+a.indexes[c].name+'" '+e}return""};function md(a,b){var c,d=b;if(E(a)){c=a.version;for(var d=[],e=a.stores||[],f=0;f<e.length;f++){var g=ad(e[f]);d.push(g)}}else C(a)?c=0==a.length?m:parseFloat(a):D(a)&&(c=a);A(c)&&((!D(c)||0>c)&&k(new N("Invalid version: "+c+" ("+a+")")),isNaN(c)&&(c=m));A(b)&&(!B(b)||0<b.length&&!(b[0]instanceof $c))&&k(new N("stores"));this.version=c;this.Za=!A(this.version);this.stores=d||[]}x=md.prototype;
x.toJSON=function(){var a=xa(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;A(this.version)&&(b.version=this.version);return b};x.Za=s;x.J=v(s);function nd(a){return xa(a.stores,function(a){return a.name})}x.ca=function(a){return this.stores[a]||r};x.count=function(){return this.stores.length};function R(a,b){return Aa(a.stores,function(a){return a.name==b})}function od(a,b){return za(a.stores,function(a){return a.name==b})}
function pd(a,b,c){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var d=0;d<a.stores.length;d++){var e=R(b,a.stores[d].name),e=e&&c?e.hint(a.stores[d]):e,e=ld(a.stores[d],e);if(0<e.length)return'store: "'+a.stores[d].name+'" '+e}return""};function qd(a){Error.captureStackTrace?Error.captureStackTrace(this,qd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}F(qd,Error);function rd(a){Error.captureStackTrace?Error.captureStackTrace(this,rd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}F(qd,Error);rd.prototype.name="ydn.error.NotSupportedException";
function sd(a){Error.captureStackTrace?Error.captureStackTrace(this,sd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}F(sd,Error);function td(a){Error.captureStackTrace?Error.captureStackTrace(this,td):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}F(td,Error);td.prototype.name="ydn.InternalError";
function ud(a){Error.captureStackTrace?Error.captureStackTrace(this,ud):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}F(ud,Error);ud.prototype.name="ydn.error.ConstraintError";function vd(a){Error.captureStackTrace?Error.captureStackTrace(this,vd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}F(qd,Error);
function wd(a){Error.captureStackTrace?Error.captureStackTrace(this,wd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}F(wd,Error);function xd(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}k(Error("Invalid JSON string: "+a))}function yd(){}
function zd(a,b,c){switch(typeof b){case "string":Ad(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==r){c.push("null");break}if(B(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),zd(a,b[f],c),e=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],"function"!=typeof f&&(c.push(d),Ad(e,c),c.push(":"),zd(a,f,c),d=","));c.push("}");
break;case "function":break;default:k(Error("Unknown type: "+typeof b))}}var Bd={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},Cd=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function Ad(a,b){b.push('"',a.replace(Cd,function(a){if(a in Bd)return Bd[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return Bd[a]=e+b.toString(16)}),'"')};ub("ydn");var Dd="undefined"!=typeof z.JSON;function Ed(a){return!C(a)||/^[\s\xa0]*$/.test(a)?{}:Dd?JSON.parse(a):xd(a)}function Fd(a){var b;try{b=Q(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function Q(a){if(Dd)a=JSON.stringify(a);else{var b=[];zd(new yd,a,b);a=b.join("")}return a};function Gd(a,b){this.o=r;this.Fa=b||NaN}
Gd.prototype.oa=function(a,b){function c(a,c){for(var d=0;d<b.stores.length;d++)Hd(a,c,b.stores[d]);for(var e=a.objectStoreNames,f=e.length,d=0;d<f;d++)od(b,e[d])||a.deleteObjectStore(e[d])}function d(a,b){f.ua||(A(b)?(e.o=r,H(f,b)):(e.o=a,e.o.onabort=aa(),e.o.onerror=aa(),e.o.onversionchange=function(){e.o&&(e.o.onabort=r,e.o.onblocked=r,e.o.onerror=r,e.o.onversionchange=r,e.o.close(),e.o=r,ea(e.d))},Ab(f,parseFloat(g))))}var e=this,f=new G,g=m,h=b.version,l;l=A(h)?Id.open(a,h):Id.open(a);l.onsuccess=
function(f){var h=f.target.result;A(g)||(g=h.version);if(b.Za)e.I(function(e){if(b.J())for(var f=0;f<e.stores.length;f++)od(b,e.stores[f].getName())||Jd(b,e.stores[f].ta());if(0<pd(b,e).length)if(e=D(h.version)?h.version+1:1,"IDBOpenDBRequest"in z){h.close();var g=Id.open(a,e);g.onupgradeneeded=function(a){c(a.target.result,g.transaction)};g.onsuccess=function(a){d(a.target.result)};g.onerror=function(){d(r)}}else{var l=h.setVersion(e+"");l.a=function(a){d(r,a)};l.onsuccess=function(){l.transaction.oncomplete=
n;c(h,l.transaction)};var n=function(){var b=Id.open(a);b.onsuccess=function(a){d(a.target.result)};b.onerror=function(){d(r)}};l.transaction!=r&&(l.transaction.oncomplete=n)}else d(h)},m,h);else if(b.version>h.version){var l=h.setVersion(b.version);l.a=function(a){d(r,a)};l.onsuccess=function(){c(h,l.transaction)}}else e.I(function(a){a=pd(b,a);0<a.length?d(r,new ud("different schema: "+a)):d(h)},m,h)};l.onupgradeneeded=function(a){a=a.target.result;g=NaN;c(a,l.transaction)};l.onerror=function(a){d(r,
a)};l.onblocked=function(a){d(r,a)};D(this.Fa)&&!isNaN(this.Fa)&&yc(function(){"done"!=l.readyState&&d(r,new Kd("connection timeout after "+e.Fa))},this.Fa);return f};var Id=z.indexedDB||z.mozIndexedDB||z.webkitIndexedDB||z.moz_indexedDB||z.msIndexedDB;x=Gd.prototype;x.Fa=18E4;x.pa=v("indexeddb");x.hb=function(){return!!this.o};x.o=r;x.Hb=function(){return this.o?parseFloat(this.o.version):m};
x.I=function(a,b,c){c=c||this.o;if(A(b)){if(b===r){if(0==c.objectStoreNames.length){a(new md(c.version));return}k(new td)}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new md(c.version));return}b=c.transaction(b,I)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var h=b.objectStore(e[d]),l=[],n=0,p=h.indexNames.length;n<p;n++){var w=h.index(h.indexNames[n]);l[n]=new Rc(w.keyPath,m,w.unique,w.multiEntry,w.name)}f[d]=new $c(h.name,
h.keyPath,h.autoIncrement,m,l)}b=new md(c.version,f);a(b)};
function Hd(a,b,c){function d(){var b={autoIncrement:!!c.autoIncrement};c.keyPath!=r&&(b.keyPath=c.keyPath);try{return a.createObjectStore(c.getName(),b)}catch(d){k(d)}}if(a.objectStoreNames.contains(c.getName()))if(b=b.objectStore(c.getName()),(c.keyPath||"")!=(b.keyPath||""))a.deleteObjectStore(c.getName()),b=d();else if(da(b.autoIncrement)&&da(c.autoIncrement)&&b.autoIncrement!=c.autoIncrement)a.deleteObjectStore(c.getName()),b=d();else{for(var e=b.indexNames,f=0,g=0,h=0;h<c.indexes.length;h++){var l=
c.indexes[h];if(!e.contains(l.name)){if(l.unique||l.multiEntry){var n={unique:l.unique,multiEntry:l.multiEntry};b.createIndex(l.name,l.keyPath,n)}else b.createIndex(l.name,l.keyPath);f++}}for(h=0;h<e.length;h++)gd(c,e[h])||(b.deleteIndex(e[h]),g++)}else{b=d();for(h=0;h<c.indexes.length;h++)l=c.indexes[h],l.unique||l.multiEntry?(n={unique:l.unique,multiEntry:l.multiEntry},b.createIndex(l.name,l.keyPath,n)):b.createIndex(l.name,l.keyPath)}}
x.Sa=function(a,b,c,d){var e=this.o;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(r):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onerror=function(a){d("error",a)},b.onabort=function(a){d("abort",a)},a(b),a=r)};x.gb=function(){this.o.close()};function Ld(a){Error.captureStackTrace?Error.captureStackTrace(this,Ld):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}F(Ld,Error);Ld.prototype.name="ConstraintError";function Md(a){Error.captureStackTrace?Error.captureStackTrace(this,Md):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}F(Md,Error);
function Nd(a){Error.captureStackTrace?Error.captureStackTrace(this,Nd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}F(Nd,Error);Nd.prototype.name="ydn.db.VersionError";function Od(a){Error.captureStackTrace?Error.captureStackTrace(this,Od):this.stack=Error().stack||"";a&&(this.message=String(a))}F(Od,Error);Od.prototype.name="ydn.db.InternalError";
function Pd(a){Error.captureStackTrace?Error.captureStackTrace(this,Pd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}F(Pd,Error);function Qd(a){Error.captureStackTrace?Error.captureStackTrace(this,Qd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}F(Qd,Error);function Rd(a){Error.captureStackTrace?Error.captureStackTrace(this,Rd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}
F(Rd,Error);Rd.prototype.name="NotFoundError";function Sd(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Sd):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}F(Sd,Error);function Td(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Td):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}F(Td,Error);
function Ud(a){Error.captureStackTrace?Error.captureStackTrace(this,Ud):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}F(Ud,Error);function Kd(a){Error.captureStackTrace?Error.captureStackTrace(this,Kd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}F(Kd,Error);function Vd(a){this.a=A(a)?a:4194304}x=Vd.prototype;
x.oa=function(a,b){function c(a,b){var c=a.version?parseInt(a.version,10):0,f=s,g=0;a.changeVersion(a.version,(b.Za?isNaN(c)?1:c+1:b.version)+"",function(c){e.I(function(a){f=q;for(var d=0;d<b.count();d++){var e=R(a,b.ca(d).getName()),e=e?e.hint(b.ca(d)):r;Wd(c,b.ca(d),function(a){a&&g++},e)}if(b instanceof Xd)for(d=0;d<a.count();d++)e=a.ca(d),od(b,e.getName())||Jd(b,e)},c,a)},function(a){k(a)},function(){f&&d(a)})}function d(a,b){A(b)?(e.z=r,H(g,b)):(e.z=a,Ab(g,parseFloat(f)))}var e=this,f=NaN,g=
new G,h=r;try{h=z.openDatabase(a,"",a,this.a)}catch(l){"SECURITY_ERR"==l.name?(h=r,this.Ib=new Td(l)):k(l)}h?(f=h.version,b.version!=r&&b.version==h.version?d(h):this.I(function(a){pd(b,a,q)?c(h,b):d(h)},r,h)):d(r,this.Ib);return g};x.pa=v("websql");x.Ib=r;x.z=r;
function Yd(a){var b=a.e,c="CREATE TABLE IF NOT EXISTS "+ed(a)+" (",d=a.a,c=c+(d+" "+b+" PRIMARY KEY ");a.autoIncrement&&(c+=" AUTOINCREMENT ");for(var c=c+" ,_default_ BLOB",e=[],f=[d],g=0,h=a.indexes.length;g<h;g++){var l=a.index(g),n="";if(l.multiEntry)n=l.unique?" UNIQUE ":"",l="CREATE TABLE IF NOT EXISTS "+sa("ydn.db.me:"+a.getName()+":"+l.getName())+" ("+d+" "+b+", "+l.a+" "+l.e+n+")",e.push(l);else{l.unique&&(n=" UNIQUE ");var p=l.a;-1==f.indexOf(p)&&(c+=", "+p+" "+l.e+n,f.push(p))}}e.push(c+
");");return e}x.Hb=function(){return this.z?parseFloat(this.z.version):m};
x.I=function(a,b,c){function d(a,b){k(b)}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var f="sql"in e?e.sql:m,y=f.substr(f.indexOf("("),f.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),J=m,K,f=[],P=s,Wa=s,va=0;for(;va<y.length;va++){var Ka=y[va].match(/\w+|"[^"]+"/g),S=xa(Ka,function(a){return a.toUpperCase()}),Y=pa(Ka[0],'"'),Ka=Sc(S[1]);if(-1!=S.indexOf("PRIMARY")&&-1!=S.indexOf("KEY"))C(Y)&&
(!/^[\s\xa0]*$/.test(Y)&&"_ROWID_"!=Y)&&(J=Y),K=Ka,-1!=S.indexOf("AUTOINCREMENT")&&(P=q);else if("_default_"==Y)Wa=q;else{var Lc="UNIQUE"==S[2],S=new Rc(Y,Ka,Lc);f.push(S)}}if(0==e.name.lastIndexOf("ydn.db.me:",0)){if((y=e.name.split(":"))&&3<=y.length){var Ib=y[1],J=Ba(h,function(a){return a.getName()===Ib}),y=new Rc(y[2],Ka,Lc,q);0<=J?(va=h[J],f.push(y),h[J]=new $c(va.getName(),va.keyPath,P,K,f,m,!Wa)):h.push(new $c(Ib,m,s,m,[y]))}}else y=Ba(h,function(a){return a.getName()===e.name}),0<=y?(va=
h[y].index(0),f.push(va),h[y]=new $c(e.name,J,P,K,f,m,!Wa)):(f=new $c(e.name,J,P,K,f,m,!Wa),h.push(f))}}d=new md(g,h);a(d)}}var f=this,g=(c=c||this.z)&&c.version?parseFloat(c.version):m,g=isNaN(g)?m:g,h=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.I(a,b,c)},function(a){k(a)},e)};
function Wd(a,b,c,d){function e(b){a.executeSql(b,[],function(){f++;f==g.length&&(c(q),c=r)},function(a,b){f++;f==g.length&&(c(s),c=r);k(new Sd(b,'"'))})}var f=0,g=Yd(b);if(d){if(0==ld(b,d).length){c(q);c=r;return}g.unshift("DROP TABLE IF EXISTS "+sa(b.name))}for(b=0;b<g.length;b++)e(g[b])}x.hb=function(){return!!this.z};x.gb=aa();
x.Sa=function(a,b,c,d){function e(a){d("error",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}this.z===r&&(a(r),d("error",this.Ib));c==I?this.z.readTransaction(g,e,f):c==Gb?this.z.changeVersion(this.z.version,this.z.version+1+"",g,e,f):this.z.transaction(g,e,f)};
function Zd(a){function b(){}var c=new Vd,d=new Xd;a=c.oa(a,d);a.S(function(){c.Sa(function(a){a.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(b,c){if(c&&c.rows)for(var d=c.rows.length,l=0,n=0;n<d;n++){var p=c.rows.item(n);"__WebKitDatabaseInfoTable__"==p.name||"sqlite_sequence"==p.name||(l++,a.executeSql("DROP TABLE "+p.name))}},function(a,b){k(b)})},[],L,b)});a.Mb(aa())};function $d(a,b,c){a=["ydn.db",a];A(b)&&(a.push(b),A(c)&&(a.push(c),A(m)&&a.push(Lb(m))));return a.join("^|")};function ae(a){this.u=a||ce}function ce(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}x=ae.prototype;x.r=r;x.u=r;x.P=r;x.O=r;
function de(a,b){if(a.r==r)a.r=new ee(b),a.P=a.r,a.O=a.r;else{var c=r;fe(a,function(a){var e=r;0<this.u(a.value,b)?(e=a.left,a.left==r&&(c=new ee(b,a),a.left=c,a==this.P&&(this.P=c))):0>this.u(a.value,b)&&(e=a.right,a.right==r&&(c=new ee(b,a),a.right=c,a==this.O&&(this.O=c)));return e});c&&(fe(a,function(a){a.count++;return a.parent},c.parent),ge(a,c.parent))}}function he(a,b){fe(a,function(a){var d=r;0<this.u(a.value,b)?d=a.left:0>this.u(a.value,b)?d=a.right:ie(this,a);return d})}
x.clear=function(){this.O=this.P=this.r=r};x.contains=function(a){var b=s;fe(this,function(c){var d=r;0<this.u(c.value,a)?d=c.left:0>this.u(c.value,a)?d=c.right:b=q;return d});return b};x.va=function(){return this.r?this.r.count:0};x.Va=function(){var a=[];je(this,function(b){a.push(b)});return a};
function je(a,b){if(a.r){var c,d=c=ke(a);for(c=c.left?c.left:c;d!=r;)if(d.left!=r&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=d.right!=r&&d.right!=c?d.right:d.parent;c=e}}}function fe(a,b,c){for(c=c?c:a.r;c&&c!=r;)c=b.call(a,c)}
function ge(a,b){fe(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&me(this,a.left),ne(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&ne(this,a.right),me(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function me(a,b){oe(b)?(b.parent.left=b.right,b.right.parent=b.parent):pe(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.r=b.right,a.r.parent=r);var c=b.right;b.right=b.right.left;b.right!=r&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function ne(a,b){oe(b)?(b.parent.left=b.left,b.left.parent=b.parent):pe(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.r=b.left,a.r.parent=r);var c=b.left;b.left=b.left.right;b.left!=r&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function ie(a,b){if(b.left!=r||b.right!=r){var c=r,d;if(b.left!=r){d=qe(a,b.left);fe(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.O&&(a.O=d)}else{d=ke(a,b.right);fe(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=b.parent;
d.left=b.left;d.left&&(d.left.parent=d);b==a.P&&(a.P=d)}d.count=b.count;oe(b)?b.parent.left=d:pe(b)?b.parent.right=d:a.r=d;ge(a,c?c:d)}else fe(a,function(a){a.count--;return a.parent},b.parent),oe(b)?(b.parent.left=r,b==a.P&&(a.P=b.parent),ge(a,b.parent)):pe(b)?(b.parent.right=r,b==a.O&&(a.O=b.parent),ge(a,b.parent)):a.clear()}function ke(a,b){if(!b)return a.P;var c=b;fe(a,function(a){var b=r;a.left&&(b=c=a.left);return b},b);return c}
function qe(a,b){if(!b)return a.O;var c=b;fe(a,function(a){var b=r;a.right&&(b=c=a.right);return b},b);return c}function ee(a,b){this.value=a;this.parent=b?b:r;this.count=1}ee.prototype.left=r;ee.prototype.right=r;ee.prototype.height=1;function pe(a){return!!a.parent&&a.parent.right==a}function oe(a){return!!a.parent&&a.parent.left==a};function re(a){this.u=a||ce}F(re,ae);function se(a,b,c){if(a.r){var d;if(c instanceof ee)d=c;else if(c){if(fe(a,function(a){var b=r;0<this.u(a.value,c)?(b=a.left,d=a):0>this.u(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=ke(a);a=d;for(var e=d.left?d.left:d;a!=r;)if(a.left!=r&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=a.right!=r&&a.right!=e?a.right:a.parent;e=f}b(r)}}
function te(a,b,c){if(a.r){var d;if(c instanceof ee)d=c;else if(c){if(fe(a,ka(function(a){var b=r;0<this.u(a.value,c)?b=a.left:(0>this.u(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=qe(a);a=d;for(var e=d.right?d.right:d;a!=r;)if(a.right!=r&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=a.left!=r&&a.left!=e?a.left:a.parent;e=f}b(r)}};function T(a,b){this.key=a;this.a=b}function ue(a,b){var c=O(a.key,b.key);return 0===c?a.a!=r?b.a!=r?O(a.a,b.a):1:b.a!=r?-1:0:c};function ve(a,b,c){this.f=a;this.c=b;this.d=c;this.a={};a=this.d.keyPath;this.b=B(a)?a.join(","):a||"_ROWID_";this.a[this.b]=r;this.e=$d(this.f,this.d.getName(),this.b)+"^|"}
function we(a,b){var c=b||a.b;if(!a.a[c]){a.a[c]=new re(ue);for(var d=a.c.length,e=0;e<d;e++){var f=a.c.key(e);if(f!==r&&0==f.lastIndexOf(a.e,0)){var g=Ob(f.substr(a.e.length));if(c==a.b)de(a.a[c],new T(g));else{var h=a.c.getItem(f);if(h!==r)if(f=dd(a.d,c),h=Ed(h),h=Uc(f,h),f.multiEntry){if(B(h))for(f=0;f<h.length;f++)de(a.a[c],new T(h[f],g))}else de(a.a[c],new T(h,g))}}}}return a.a[c]}
function xe(a,b,c){for(var d in a.a){var e=a.a[d];if(e)if(d==a.b)he(e,new T(b));else{var f=dd(a.d,d),f=Jb(c,f.keyPath);he(e,new T(b,f))}}}function ye(a){for(var b in a.a){var c=a.a[b];c&&c.clear()}a.a={}}
function ze(a,b,c,d){if(b==r&&(a.d.keyPath&&(b=id(a.d,c)),a.d.autoIncrement&&b==r)){b=a.e+Lb(m);var e=Ed(a.c.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.c.setItem(b,Q(e));b=e.key_count}if(d)if(a.a[a.b]){if(a.a[a.b].contains(Lb(b)))return r}else if(a.c.getItem(a.e+Lb(b))!==r)return r;a.c.setItem(a.e+Lb(b),Q(c));d=b;for(var f in a.a)if(e=a.a[f])if(f==a.b)de(e,new T(d));else{var g=dd(a.d,f),g=Jb(c,g.keyPath);g!=r&&de(e,new T(d,g))}return b}
function Ae(a,b){var c=a.e+Lb(b),d=a.c.getItem(c);if(d===r)return 0;a.c.removeItem(c);c=Ed(d);xe(a,b,c);return 1}ve.prototype.clear=function(){ye(this);Be(this)};function Ce(a,b){var c=a.c.getItem(a.e+Lb(b)),d=m;if(c!==r)for(var d=Ed(c),c=0,e=a.d.indexes.length;c<e;c++){var f=a.d.index(c);if("DATE"==f.type){var g=Uc(f,d);g&&Vc(f,d,new Date(g))}}return d;k("impl")}ve.prototype.getName=function(){return this.d.getName()};
function De(a,b,c){b=b||a.b;a=we(a,b);var d=r,e=r,f=0,g=s,h=s;c!=r&&(c.lower!=r&&(d=new T(c.lower)),c.upper!=r&&(e=new T(c.upper)),g=c.lowerOpen,h=c.upperOpen);se(a,function(a){if(a!=r&&(a=a.value,!g||!(d!=r&&0==O(a.key,d.key)))){if(e!=r&&(a=O(a.key,e.key),1===a||0===a&&h))return q;f++}},d);return f}
function Be(a,b){var c=we(a,a.b),d=r,e=r,f=0,g=[],h=[],l=s,n=s;b!=r&&(b.lower!=r&&(d=new T(b.lower)),b.upper!=r&&(e=new T(b.upper)),l=b.lowerOpen,n=b.upperOpen);se(c,function(b){if(b!=r&&(b=b.value,!l||!(d!=r&&0==ue(b,d)))){if(e!=r){var c=ue(b,e);if(1===c||0===c&&n)return q}var c=a.e+Lb(b.key),t=a.c.getItem(c);t!==r&&(a.c.removeItem(c),f++,10>g.length&&(g.push(b.key),h.push(Ed(t))))}},d);if(10>g.length)for(c=0;c<g.length;c++)xe(a,g[c],h[c]);else ye(a);return f}
function Ee(a,b,c,d,e,f,g,h){function l(c){if(c&&(J++,!(J<g))){var d=c.value;if(e){if(P&&y!=r&&0==O(d.key,y.key))return;if(t!=r&&(c=O(d.key,t.key),-1===c||0===c&&K))return q}else{if(K&&t!=r&&0==O(d.key,t.key))return;if(y!=r&&(c=O(d.key,y.key),1===c||0===c&&P))return q}c=d.key;if(!h||p!=r&&O(p,c))d=w?d.a:c,b?n.push(d):(d=Ce(a,d),n.push(d));p=c;if(A(f)&&n.length>=f)return q}}var n=[],p;c=c||a.b;var w=c!=a.b;c=we(a,c);var t=r,y=r;A(g)||(g=0);var J=-1,K=s,P=s;d!=r&&(d.lower!=r&&(t=w&&e?new T(d.lower,
"\uffff"):new T(d.lower)),d.upper!=r&&(y=w&&!e?new T(d.upper,"\uffff"):new T(d.upper)),K=d.lowerOpen,P=d.upperOpen);e?te(c,l,y):se(c,l,t);return n}ve.prototype.$=function(a,b,c,d,e){return Ee(this,q,a,b,c,d,e)};function Fe(a,b){this.g=a;this.a=b}function Ge(a,b,c){yc(function(){b.call(c,this.g)},0,a);return function(){a.a("complete",r);a.a=r;a.g=r}};function He(){this.clear()}x=He.prototype;x.Pa=function(){return this};x.setItem=function(a,b){A(this.a[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.a[a]=b};x.getItem=function(a){return A(this.a[a])?this.a[a]:r};x.removeItem=function(a){delete this.a[a];Da(this.keys,a.toString());this.length=this.keys.length};x.length=0;x.key=function(a){a=this.keys[a];return A(a)?this.a[a]:r};x.clear=function(){this.a={};this.keys=[];this.length=0};function Ie(a){this.e=a||new He;this.b=NaN}x=Ie.prototype;x.Hb=u("b");
x.oa=function(a,b){function c(a,b){yc(function(){b?H(d,b):Ab(d,a)})}var d=new G;this.g=this.e.Pa(a);this.ia=a;this.a=b;this.c={};var e=$d(this.ia);this.b=NaN;var f=Ed(this.g.getItem(e));A(f.version)&&!D(f.version)&&(f.version=NaN);if(f)if(f=new md(f),pd(this.a,f))if(!this.a.Za&&!isNaN(f.version)&&this.a.version>f.version)c(NaN,new Nd(""));else{var g=this.a.version;this.b=A(g)?g:f.version+1;for(g=0;g<this.a.count();g++)var h=this.a.ca(g);if(this.a instanceof Xd)for(g=0;g<f.count();g++)h=f.ca(g),Jd(this.a,
h);g=this.a.toJSON();g.version=this.b||NaN;this.g.setItem(e,Q(g));c(f.version||NaN)}else{for(g=0;g<this.a.count();g++)h=this.a.ca(g);this.b=f.version||NaN;c(this.b)}else f=b.toJSON(),this.b=1,f.version=this.b,this.g.setItem(e,Q(f)),c(NaN);return d};x.hb=function(){return!!this.ia};x.pa=v("memory");x.gb=aa();x.Sa=function(a,b,c,d){a(new Fe(this,function(a,b){d(a,b)}))};x.I=function(a){yc(function(){var b=$d(this.ia),b=this.g.getItem(b),b=new md(b);a(b)},0,this)};
function U(a,b){var c=R(a.a,b);c?a.c[b]||(a.c[b]=new ve(a.ia,a.g,c)):k(new Qc('store name "'+b+'" not found.'));return a.c[b]};function Je(){Ie.call(this,this)}F(Je,Ie);Je.prototype.Pa=function(){return window.localStorage};Je.prototype.pa=v("localstorage");function Ke(a){var b=new Je,c=new Xd;b.oa(a,c);b.I(function(a){for(var c=0;c<a.stores.length;c++)U(b,a.stores[c].name).clear()})}function Le(){Ie.call(this,this)}F(Le,Ie);Le.prototype.Pa=function(){return window.sessionStorage};Le.prototype.pa=v("sessionstorage");
function Me(a){var b=new Le,c=new Xd;b.oa(a,c);b.I(function(a){for(var c=0;c<a.stores.length;c++)U(b,a.stores[c].name).clear()})};var O=Id&&Id.cmp?ka(Id.cmp,Id):Tb;function Ne(a,b,c,d){this.a=a;this.c=[];this.e=[];this.f=[];this.n=0;this.sb=this.C=s;b&&(this.c=Ea(b.c),this.e=Ea(b.e));c!=r&&(this.c[0]=c);d!=r&&(this.e[0]=d);this.b=function(){k(new Qc)};this.d=function(){k(new Qc)};0<this.a.length&&Oe(this)}x=Ne.prototype;x.n=0;x.C=s;x.sb=s;function Pe(a,b){b.v=function(b,d,e){b==r&&(a.C=q);a.c[0]=b;a.e[0]=d;a.f[0]=e;a.n++;a.C?(a.b(),Qe(a)):a.b(a.c[0])};b.Ca=function(b){a.d(b);Qe(a);a.C=q};b.qa(a.c[0],a.e[0])}
function Re(a){function b(b){var f=a.a[b];f.v=function(l,n,p){d++;l==r&&(a.C=q);a.c[b]=l;a.e[b]=n;a.f[b]=p;e[b]=!f.b?l:n;if(d==c){d=0;if(a.C)a.n++,a.b(),Qe(a);else if(l=e.reduce(function(a,b){return a===r?b:1==O(b,a)?b:a},r),0==O(l,e[0]))a.b(a.c[0]);else for(n=0;n<c;n++)-1==O(e[n],l)?(p=a.a[n],!p.b?p.ea(l):p.La(l)):d++;Ca(e)}};f.Ca=function(b){a.d(b);Qe(a);a.C=q;d=0};f.qa(a.c[b],a.e[b])}for(var c=a.a.length,d=0,e=[],f=0;f<c;f++)b(f)}
function Oe(a){var b=a.a.length;1==b?Pe(a,a.a[0]):1<b?Re(a):k(new Qc("no cursors"))}x.va=u("n");x.$b=function(a){return this.c[a||0]};x.L=function(a){a=a||0;return this.a[a].b?this.e[a]:this.c[a]};x.X=function(a){a=a||0;return!this.a[a].ya?this.f[a]:this.L(a)};x.advance=function(a){for(var b=0;b<this.a.length;b++)this.a[b].advance(a)};x.update=function(a,b){return this.a[b||0].update(a)};x.clear=function(a){return this.a[a||0].clear()};
function Se(a){a.sb=q;Qe(a);for(var b=0;b<a.a.length;b++)a.a[b].za();Ca(a.f);Ca(a.a)}function Qe(a){a.e=xa(a.e,function(a){if(a!=r)return Ac(a)});a.c=xa(a.c,function(a){if(a!=r)return Ac(a)})};function Te(a,b,c,d,e){if(!(b instanceof M)){var f;C(b)&&A(c)?f=Mc(b,c,d,e):b!=r?b instanceof M?f=b:E(b)?f=new M(b.lower,b.upper,b.lowerOpen,b.upperOpen):k(new N("Invalid key range: "+b+" of type "+typeof b)):f=r;b=f}this.a=b;this.da=a}Te.prototype.da="";Te.prototype.pb=function(a){if(this.da!=a.da)return r;a=this.a!=r&&a.a!=r?this.a.pb(a.a):this.a||a.a;return new Te(this.da,a)};function V(a,b,c,d,e,f,g){this.H=a;this.e=b;this.l=g;this.d=!!this.e;this.b=A(f)?f:!!C(this.e);a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.f=a;this.a=Hc(c);this.c=r}V.prototype.b=q;function Ue(a,b,c){3<arguments.length&&k(new N("too many argument"));V.call(this,a,m,b,c,m,q)}F(Ue,V);function Ve(a,b,c,d,e){C(b)||k(new N("index name must be string"));V.call(this,a,b,c,d,e,q)}F(Ve,V);function We(a,b,c){3<arguments.length&&k(new N("too many argument"));V.call(this,a,m,b,c,m,s)}
F(We,V);function Xe(a,b,c,d,e){C(b)||k(new N("index name must be string"));V.call(this,a,b,c,d,e,s)}F(Xe,V);x=V.prototype;x.Pb=function(){return this.c?this.c.C?"done":this.c.sb?"rest":"busy":"init"};x.Gc=u("H");x.N=u("e");x.pc=u("a");x.Ec=function(){return this.a?this.a instanceof Ic?this.a:Ic.bound(this.a.lower,this.a.upper,this.a.lowerOpen,this.a.upperOpen):r};x.Hc=u("b");x.oc=u("d");x.toJSON=function(){return{store:this.H,index:this.e,keyRange:this.a?Bc(this.a):r,direction:this.f}};
x.Dc=function(){return this.c?this.c.$b():m};x.Fc=function(){return this.c?this.c.L():m};x.wc=function(a,b){var c=new V(this.H,this.e,this.a,this.fb(),this.Ga(),this.b,this.l);c.c=new Ne([],r,a,b);return c};x.Jc=function(a,b){var c=new V(this.H,this.e,this.a,!this.fb(),this.Ga(),this.b,this.l);a!=r&&(c.c=new Ne([],r,a,b));return c};x.count=function(){return this.c?this.c.va():NaN};
x.stores=function(){var a=[this.H];if(this.k)for(var b=0;b<this.k.length;b++)0<=ua(a,this.k[b].a)||a.push(this.k[b].a);return a};x.fb=function(){return"prev"===this.f||"prevunique"===this.f};x.Ga=function(){return"nextunique"===this.f||"prevunique"===this.f};
x.vc=function(a,b){var c;c=[b];c=this.a?new M(this.a.lower!=r?c.concat(this.a.lower):c,this.a.upper!=r?c.concat(this.a.upper):c,!!this.a.lowerOpen,!!this.a.upperOpen):this.d?Gc(c):Cc(b);var d,e;this.l?e=[a].concat(this.l):this.d?e=[a].concat(this.e):d=a;return new V(this.H,d,c,this.fb(),this.Ga(),this.b,e)};
function Ye(a,b,c,d,e){e=e||2;for(var f=[d.b(b,c,a.H,a.l||a.e,a.a,a.f,a.b,e)],g=0,h=a.k?a.k.length:0;g<h;g++){var l=a.k[g];if(l.b&&l.value!=r){var n;n=!a.d?Ic.only(l.value):Hc(Gc([l.value]));l=d.b(b,c,l.a,l.b,n,a.f,a.b,e);f.push(l)}}a.c=new Ne(f,a.c);return a.c}x.Ic=function(){"busy"==this.Pb()&&k(new wd("busy"));this.c=r};function Ze(a,b){this.ia=a;this.a=b}Ze.prototype.ia="";Ze.prototype.N=function(a,b){return(B(b)?fd(a,b):dd(a,b)).getName()};function $e(a,b,c,d){"transaction"in a?(this.k=a,this.e=this.f=r):"objectStore"in a?(this.k=r,this.f=a.db,this.e=a):k(new qd("storage instance require."));this.l=b;this.t=c;this.za=d;this.b=[];this.a=0;this.d=s}$e.prototype.d=s;$e.prototype.b=[];
function af(a,b){a.a++;b.onsuccess=function(b){if(b=b.target.result){if(ea(a.za)){var d=b.value;a.za(b.primaryKey,a.t!=r?d[a.t]:d)}if(b&&0<a.b.length)b["continue"](a.b.shift());else a.a--,0==a.a&&a.T&&a.T()}};b.onerror=function(){a.a--;0==a.a&&a.T&&a.T()}}function bf(a,b){0==a.b.length&&0==a.a?b():a.T=b}
function cf(a){if(!a.d){var b=function(){a.e=r},c=function(b){var c=a.b.shift();b=b.objectStore(a.l);af(a,b.openCursor(c))};a.e?c(a.e):a.f?(a.c=a.f.transaction([a.l],I),a.c.oncomplete=function(){b()},a.c.onerror=function(){b()},a.c.onabort=function(){b()}):a.k?(a.d=q,a.k.transaction(function(b){a.d=s;c(b)},[a.l],I,b)):k(new td(""))}};function df(a,b,c){a&&a instanceof W?(this.Ja=a,this.Y=r):a&&a.db?(this.Ja=r,a.db?this.Y=new $e(a,this.a,this.Ka,ka(this.T,this)):k(new N("Invalid IndexedDB Transaction."))):k(new N("ydn.db.Streamer: First argument requires storage or transaction instance required."));C(b)||k(new N("a store name required."));this.a=b;A(c)&&!C(c)&&k(new N("index name must be a string."));this.Ka=c;this.Y=r;this.R=[];this.ba=[];this.xa=s}x=df.prototype;x.Ja=r;x.g=r;x.Gb=r;x.ba=[];x.R=[];x.Y=r;
x.Ac=function(a){this.Gb=a};function ef(a){var b=0<a.R.length;if(b&&!a.xa&&ea(a.Gb)){var c=function(){ef(a)},d=a.ba.shift(),e=a.R.shift(),b=0<a.R.length,c=a.Gb(d,e,b?c:r);b&&!c&&ef(a)}}x.xa=s;x.Mc=function(a){if(this.Y){this.xa=q;var b=this;bf(this.Y,function(){a(b.ba,b.R);b.ba=[];b.R=[];b.xa=s})}else a(this.ba,this.R),this.ba=[],this.R=[]};x.T=function(a,b){this.ba.push(a);this.R.push(b);ef(this)};
x.push=function(a,b){this.xa&&k(new wd(""));if(2<=arguments.length)this.T(a,b);else{if(!this.Y){this.Ja||k(new wd(""));var c=this.Ja.f();c?"indexeddb"===c?this.Y=new $e(this.Ja,this.a,this.Ka,ka(this.T,this)):k(new sd(c)):k(new wd(""))}c=this.Y;c.b.push(a);cf(c)}};x.N=u("Ka");function ff(a,b,c,d,e,f,g,h){Ub.call(this);this.Jb=c;this.f=d;this.b=C(this.f);this.i=e||r;this.c=a;this.j="prev"==f||"prevunique"==f;this.unique="nextunique"==f||"prevunique"==f;this.M=f;this.ya=g;this.k=h}F(ff,Ub);x=ff.prototype;x.Jb="";x.M="";x.i=r;x.unique=s;x.j=s;x.ya=q;x.Ca=function(){k(new Qc)};x.v=function(){k(new Qc)};x.ka=function(){this.c=r};function gf(a,b){this.a=a||r;this.f=b;this.e=0}gf.prototype.a=r;gf.prototype.b=v(s);function hf(a,b,c){var d,e=d!=r;if(!A(d)){d=c[0];for(var e=d!=r,f=1;e&&f<c.length;f++)if(c[f]==r||0!=O(c[f],d))e=s}return e&&(a.e++,a.a&&a.a.push(d),A(a.f)&&a.e>=a.f)?[]:b}gf.prototype.c=function(){return[]};function jf(a,b,c,d,e,f,g,h){ff.call(this,a,0,c,d,e,f,g,h);this.q=r}F(jf,ff);x=jf.prototype;x.Ra=function(a){(a=a.target.result)?this.v(a.key,this.b?a.primaryKey:m,a.value):this.v()};x.q=r;
x.qa=function(a,b){function c(a,b,c){h.q=g;h.v(a,h.b?b:m,c);h.q&&(h.q.onsuccess=ka(h.Ra,h));g=r}var d=this.i,e=this.c.objectStore(this.Jb),f=C(this.f)?e.index(this.f):r,g;g=!this.ya?f?this.M!=r?f.openCursor(d,this.M):d!=r?f.openCursor(d):f.openCursor():this.M!=r?e.openCursor(d,this.M):d!=r?e.openCursor(d):e.openCursor():f?this.M!=r?f.openKeyCursor(d,this.M):d!=r?f.openKeyCursor(d):f.openKeyCursor():this.M!=r?e.openCursor(d,this.M):d!=r?e.openCursor(d):e.openCursor();var h=this;g.onerror=function(){h.Ca(g.error)};
a!=r?g.onsuccess=function(d){if(d=d.target.result){var e=Id.cmp(d.key,a),f=h.j?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);else if(b!=r)if(Id.cmp(d.primaryKey,b)==f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(h.q=g,h.q.onsuccess=ka(h.Ra,h))};x.Ya=function(){return!!this.q};x.update=function(a){var b=this.q.result;if(b){var c=new G;a=b.update(a);a.onsuccess=function(a){Ab(c,a.target.result)};a.onerror=function(a){H(c,a)};return c}k(new Qd("cursor gone"))};
x.clear=function(){var a=this.q.result;if(a){var b=new G,a=a["delete"]();a.onsuccess=function(){Ab(b,1)};a.onerror=function(a){H(b,a)};return b}k(new Qd("cursor gone"))};x.Ma=function(a,b){this.qa(b,a)};x.advance=function(a){var b=this.q.result;if(1==a)b["continue"]();else b.advance(a)};
x.La=function(a){var b,c=this.q.result,d=this;this.q.onsuccess=function(e){if(c=e.target.result)if(b=Id.cmp(c.primaryKey,a),0==b||1==b&&!d.j||-1==b&&d.j)d.q.onsuccess=ka(d.Ra,d),d.v(c.key,d.b?c.primaryKey:m,c.value);else c["continue"]();else d.q.onsuccess=ka(d.Ra,d),d.v()};c["continue"]()};x.ea=function(a){var b=this.q.result;if(a!=r)b["continue"](a);else b["continue"]()};x.ka=function(){jf.G.ka.call(this);this.q=r};function kf(a,b){Ze.call(this,a,b)}F(kf,Ze);x=kf.prototype;x.Qa=function(a,b,c,d){function e(b){var h=a.objectStore(d[b]).count();h.onsuccess=function(a){f[b]=a.target.result;b++;b==d.length?(c(f),c=r):e(b)};h.onerror=function(a){a.preventDefault();c(h.error,q);c=r}}var f=[];0==d.length?(c([]),c=r):e(0)};x.nb=function(a,b,c,d,e,f){a=a.objectStore(d);var g;g=A(f)?a.add(e,f):a.add(e);g.onsuccess=function(a){c(a.target.result)};g.onerror=function(a){a.preventDefault();c(g.error,q)}};
x.Ab=function(a,b,c,d,e,f){a=a.objectStore(d);var g;g=A(f)?a.put(e,f):a.put(e);g.onsuccess=function(a){c(a.target.result)};g.onerror=function(a){a.preventDefault();c(g.error,q)}};
x.ob=function(a,b,c,d,e,f){function g(a){var b;b=f!=r?p.add(e[a],f[a]):p.add(e[a]);b.onsuccess=function(b){l++;h[a]=b.target.result;l==e.length?c(h,n):(b=a+10,b<e.length&&g(b))};b.onerror=function(d){l++;h[a]=b.error;n=q;d.preventDefault();l==e.length?c(d.target.transaction,n):(d=a+10,d<e.length&&g(d))}}var h=[],l=0,n=q,p=a.objectStore(d);if(0<e.length)for(a=0;10>a&&a<e.length;a++)g(a);else c([])};
x.Bb=function(a,b,c,d,e,f){function g(a){var b;b=f!=r?p.put(e[a],f[a]):p.put(e[a]);b.onsuccess=function(b){l++;h[a]=b.target.result;l==e.length?n?c(h,q):c(h):(b=a+10,b<e.length&&g(b))};b.onerror=function(d){l++;h[a]=b.error;n=q;d.preventDefault();l==e.length?n?c(h,q):c(h):(d=a+10,d<e.length&&g(d))}}var h=[],l=0,n=s,p=a.objectStore(d);if(0<e.length)for(a=0;10>a&&a<e.length;a++)g(a);else c([])};
x.zb=function(a,b,c,d,e){function f(b){var c=e[b],t=a.objectStore(c.a),y;y=t.keyPath===r?t.put(d[b],c.id):t.put(d[b]);y.onsuccess=function(a){l++;h[b]=a.target.result;l==d.length?g():(a=b+10,a<d.length&&f(a))};y.onerror=function(a){l++;h[b]=y.error;n=q;a.preventDefault();l==d.length?g():(a=b+10,a<d.length&&f(a))}}function g(){n?c(h,q):c(h)}var h=[],l=0,n=s;if(0<d.length)for(b=0;10>b&&b<d.length;b++)f(b);else g()};
x.bb=function(a,b,c,d,e){var f=a.objectStore(d).openCursor(Ic.only(e));f.onsuccess=function(a){var b=a.target.result;b?(b=b["delete"](),b.onsuccess=function(){c(1)},b.onerror=function(){c(a,q)}):c(m)};f.onerror=function(a){a.preventDefault();c(f.error,q)}};
x.Db=function(a,b,c,d){function e(b){if(b>=d.length)c(f,g);else{d[b].a!=h&&(h=d[b].a,l=a.objectStore(h));var p=l.openCursor(Ic.only(d[b].id));p.onsuccess=function(a){b++;(a=a.target.result)?(a=a["delete"](),a.onsuccess=function(){f++;e(b)},a.onerror=function(){g=q;e(b)}):e(b)};p.onerror=function(a){a.preventDefault();c(p.error,q)}}}var f=0,g=s,h,l;e(0)};
x.cb=function(a,b,c,d,e){var f=a.objectStore(d),g=f.count(e);g.onsuccess=function(a){var b=a.target.result;a=f["delete"](e);a.onsuccess=function(){c(b)};a.onerror=function(){c(g.error,q)}};g.onerror=function(a){a.preventDefault();c(g.error,q)}};x.rb=function(a,b,c,d,e){var f=a.objectStore(d)["delete"](e);f.onsuccess=function(){c(m)};f.onerror=function(a){a.preventDefault();c(f.error,q)}};
x.Cb=function(a,b,c,d,e,f){var g=a.objectStore(d).index(e).openCursor(f),h=0;g.onsuccess=function(a){var b=a.target.result;if(b){var d=b["delete"]();d.onsuccess=function(){h++;b["continue"]()};d.onerror=function(){k(d.error)}}else c(h)};g.onerror=function(a){a.preventDefault();c(g.error,q)}};x.Oa=function(a,b,c,d){var e=d.length,f=0;for(b=0;b<e;b++){var g=a.objectStore(d[b]).clear();g.onsuccess=function(){f++;f==e&&c(f)};g.onerror=function(a){f++;a.preventDefault();f==e&&c(g.error,q)}}};
function lf(a,b,c,d,e,f,g,h,l,n){var p=[];a=a.objectStore(d);var w=Hb(g,n);f&&Q(f);var t;t=e?a.index(e).openCursor(f,w):a.openCursor(f,w);var y=s;t.onsuccess=function(a){if(a=a.target.result)if(!y&&0<l)y=q,a.advance(l);else if(p.push(a.value),p.length<h)a["continue"]();else c(p);else c(p)};t.onerror=function(a){a.preventDefault();c(t.error,q)}}x.Ba=function(a,b,c,d,e,f,g,h){lf(a,b,c,d,r,e,f,g,h)};x.Aa=function(a,b,c,d,e,f,g,h,l,n){lf(a,b,c,d,e,f,g,h,l,n)};
x.ub=function(a,b,c,d,e,f,g,h){var l=[],n=a.objectStore(d).openCursor(e,Hb(f)),p=s;n.onsuccess=function(a){if(a=a.target.result)if(!p&&0<h)p=q,a.advance(h);else if(l.push(a.key),l.length<g)a["continue"]();else c(l);else c(l)};n.onerror=function(a){a.preventDefault();c(n.error,q)}};
x.tb=function(a,b,c,d,e,f,g,h,l,n){var p=[],w=a.objectStore(d).index(e).openKeyCursor(f,Hb(g,n)),t=s;w.onsuccess=function(a){if(a=a.target.result)if(!t&&0<l)t=q,a.advance(l);else{if(p.push(a.primaryKey),p.length<h)a["continue"]()}else c(p)};w.onerror=function(a){a.preventDefault();c(w.error,q)}};x.Ua=function(a,b,c,d,e){var f=a.objectStore(d).get(e);f.onsuccess=function(a){c(a.target.result)};f.onerror=function(a){a.preventDefault();c(f.error,q)}};
x.vb=function(a,b,c,d,e){function f(a){if(e[a]==r)if(h++,g[a]=m,h==n)c(g);else{var b=a+10;b<n&&f(b)}var d;try{d=l.get(e[a])}catch(y){"DataError"==y.name&&k(new Md(e[a])),k(y)}d.onsuccess=function(b){h++;g[a]=b.target.result;h==n?c(g):(b=a+10,b<n&&f(b))};d.onerror=function(a){h++;a.preventDefault();c(d.error,q)}}var g=[],h=0,l=a.objectStore(d),n=e.length;if(0<n)for(a=0;10>a&&a<n;a++)f(a);else c([])};
x.wb=function(a,b,c,d){function e(b){var l=d[b],n=a.objectStore(l.a).get(l.id);n.onsuccess=function(a){g++;f[b]=a.target.result;g==d.length?c(f):(a=b+10,a<d.length&&e(a))};n.onerror=function(a){g++;a.preventDefault();c(n.error,q)}}var f=[],g=0;if(0<d.length)for(b=0;10>b&&b<d.length;b++)e(b);else c([])};
x.ha=function(a,b,c,d,e,f){a=a.objectStore(d);e&&Q(e);var g;f!=r?(b=a.index(f),g=e!=r?b.count(e):b.count()):g=e!=r?a.count(e):a.count();g.onsuccess=function(a){c(a.target.result)};g.onerror=function(a){a.preventDefault();c(g.error,q)}};function mf(a,b){Ze.call(this,a,b)}F(mf,kf);mf.prototype.d=function(a,b,c,d,e,f){nf(this,1,a,b,c,d,e,f)};function nf(a,b,c,d,e,f,g,h){var l=[],n=1==b,p=Ye(f,c,d,a,b);p.d=function(a){Se(p);e(a,q)};var w=0,t=s,y=s;p.b=function(a){y||(y=q);if(a!=r){var b=f.d?p.L():a;!t&&0<h?(p.advance(h),t=q):(w++,n?l.push(a):l.push(f.b?b:p.X()),!A(g)||w<g?p.a[0].ea(m):(Se(p),e(l)))}else Se(p),e(l)}}mf.prototype.c=function(a,b,c,d,e,f){nf(this,2,a,b,c,d,e,f)};
mf.prototype.b=function(a,b,c,d,e,f,g,h){b=R(this.a,c);A(d)&&(d=this.N(b,d));return new jf(a,0,c,d,e,f,g,h)};function of(){this.a=s}of.prototype.a=s;function pf(a,b,c,d,e,f,g,h,l){ff.call(this,a,0,d,e,f,g,h,l);this.eb=this.Da=this.la=m;this.yb=this.l=this.d=this.a=r;this.e=new of}F(pf,ff);x=pf.prototype;x.Ya=function(){return!!this.c};x.update=function(){k(new Oc)};x.advance=function(a){function b(b){d++;if(!b||d>=a)return qf(c,b)}var c=this,d=this.a?-1:0;this.j?te(this.d,b,this.a):se(this.d,b,this.a)};
x.ea=function(a){if(a!=r){var b=this,c=new T(a),d=function(c){b.a=c;if(!c)return qf(b,c);var d=O(c.value.key,a);if(b.j){if(1!=d)return qf(b,c)}else if(-1!=d)return qf(b,c)};this.j?te(this.d,d,c):se(this.d,d,c)}else this.advance(1)};function rf(a){yc(function(){a.e.a?(a.e.a=s,this.v(this.la,this.Da,this.eb),rf(this)):(this.yb(),this.yb=r)},0,a)}
function qf(a,b){if(a.a=b){var c=b.value;if(a.i)if(!a.j&&a.i.upper!=r){var d=O(c.key,a.i.upper);if(1==d||0==d&&a.i.upperOpen)a.a=r}else if(a.j&&a.i.lower!=r&&(d=O(c.key,a.i.lower),-1==d||0==d&&a.i.lowerOpen))a.a=r;if(a.a){if(a.unique&&(a.la!=r&&c.key!=r)&&0==O(a.la,c.key))return;a.la=c.key;a.Da=a.b?c.a:a.la;2==a.k&&(!a.ya?a.eb=Ce(a.l,a.Da):a.eb=a.Da)}}a.a||(a.la=m,a.Da=m,a.eb=m);return a.e.a=q}
x.qa=function(a,b){var c=r;this.i&&(this.j?this.i.upper!=r&&(c=new T(this.i.upper)):this.i.lower!=r&&(c=new T(this.i.lower)));a!=r&&(c=this.b?new T(a,b):new T(a));this.yb=Ge(this.c,function(d){function e(c){var d=c.value,e=d.key;if(c&&e!=r)if(a!=r)if(b!=r){if(d=d.a,d!=r&&0==O(a,e)&&0==O(b,d))return}else{if(0==O(a,e))return}else if(this.i&&(!this.j&&(this.i.lowerOpen&&this.i.lower!=r)&&(d=O(e,this.i.lower),0==d)||this.j&&(this.i.upperOpen&&this.i.upper!=r)&&(d=O(e,this.i.upper),0==d)))return;return qf(this,
c)}this.l=U(d,this.Jb);this.d=we(this.l,this.f);this.j?te(this.d,ka(e,this),c):se(this.d,ka(e,this),c);rf(this)},this)};x.clear=function(){k(new Oc)};x.Ma=function(){k(new Oc)};x.La=function(){k(new Oc)};function sf(a,b){Ze.call(this,a,b)}F(sf,Ze);x=sf.prototype;x.tb=function(a,b,c,d,e,f,g,h,l){f&&Fd(f);var n=Ge(a,function(a){a=U(a,d).$(e,f,g,h,l);c(a);n();n=r},this)};x.ub=function(a,b,c,d,e,f,g,h){e&&Fd(e);var l=Ge(a,function(a){a=U(a,d).$(r,e,f,g,h);c(a);l();l=r},this)};x.zb=function(a,b,c,d,e){tf(this,a,c,r,d,e,q,s)};
function tf(a,b,c,d,e,f,g,h){var l=Ge(b,function(a){var b;if(h)b=U(a,d),a=ze(b,f,e,!g),a!=r?c(a):(a=new Ld(""),c(a,q));else{for(var w=d,t=[],y=s,J=f||{},K=0;K<e.length;K++){var P;d?P=J[K]:(w=f[K],P=w.id,w=w.a);if(!b||b.getName()!=w)b=U(a,w);P=ze(b,P,e[K],!g);P!=r||(y=q);t.push(P)}c(t,y)}l();l=r},a)}x.nb=function(a,b,c,d,e,f){tf(this,a,c,d,e,f,s,q)};x.Ab=function(a,b,c,d,e,f){tf(this,a,c,d,e,f,q,q)};x.ob=function(a,b,c,d,e,f){tf(this,a,c,d,e,f,s,s)};x.Bb=function(a,b,c,d,e,f){tf(this,a,c,d,e,f,q,s)};
x.Ua=function(a,b,c,d,e){var f=Ge(a,function(a){a=Ce(U(a,d),e);c(a);f();f=r},this)};function uf(a,b,c,d,e){var f=Ge(b,function(a){for(var b=[],l=s,n=d,p,w=0;w<e.length;w++){var t=e[w];t instanceof zc&&(n=t,t=n.id,n=n.a);if(!p||p.getName()!=n)p=U(a,n);t=Ce(p,t);t!=r||(l=q);b.push(t)}c(b,l);f();f=r},a)}x.vb=function(a,b,c,d,e){uf(this,a,c,d,e)};x.wb=function(a,b,c,d){uf(this,a,c,r,d)};x.Ba=function(a,b,c,d,e,f,g,h){e&&Fd(e);var l=Ge(a,function(a){a=U(a,d);a=Ee(a,s,r,e,f,g,h);c(a);l();l=r},this)};
x.Aa=function(a,b,c,d,e,f,g,h,l,n){f&&Fd(f);var p=Ge(a,function(a){a=Ee(U(a,d),s,e,f,g,h,l,n);c(a);p();p=r},this)};x.bb=function(a,b,c,d,e){var f=Ge(a,function(a){a=Ae(U(a,d),e);c(a);f();f=r},this)};x.Db=function(a,b,c,d){var e,f=0,g=Ge(a,function(a){for(var b=0;b<d.length;b++){var n=d[b].a,p=d[b].id;if(!e||e.getName()!=n)e=U(a,n);f+=Ae(e,p)}c(f);g();g=r},this)};x.rb=function(a,b,c,d,e){this.cb(a,b,c,d,e)};x.cb=function(a,b,c,d,e){e&&Q(e);var f=Ge(a,function(a){a=Be(U(a,d),e);c(a);f();f=r},this)};
x.Cb=function(a,b,c,d,e,f){f&&Q(f);var g=Ge(a,function(a){a=U(a,d);for(var b=a.$(e,f),n=b.length,p=0;p<n;p++)Ae(a,b[p]);c(n);g();g=r},this)};x.Oa=function(a,b,c,d){var e=Ge(a,function(a){for(var b=0;b<d.length;b++)U(a,d[b]).clear();c(d.length);e();e=r},this)};x.Qa=function(a,b,c,d){var e=Ge(a,function(a){for(var b=[],h=0;h<d.length;h++){var l=U(a,d[h]);b.push(De(l))}c(b);e();e=r},this)};x.ha=function(a,b,c,d,e,f){var g=Ge(a,function(a){a=De(U(a,d),f,e);c(a);g();g=r},this)};function vf(a,b){Ze.call(this,a,b)}F(vf,sf);vf.prototype.d=function(a,b,c,d,e,f){var g=[],h=Ye(d,a,b,this);h.d=function(a){c(a,q)};var l=0,n=s;h.b=function(a){a!=r?!n&&0<f?(h.advance(f),n=q):(l++,g.push(a),!A(e)||l<e?h.advance(1):(Se(h),c(g))):(Se(h),c(g))}};
vf.prototype.c=function(a,b,c,d,e,f){var g=[],h=Ye(d,a,b,this);h.d=function(a){Se(h);c(a,s)};var l=0,n=s;h.b=function(a){if(a!=r){a=d.d?h.L():a;var b=h.X();!n&&0<f?(h.advance(f),n=q):(l++,g.push(d.b?a:b),!A(e)||l<e?h.advance(1):(Se(h),c(g)))}else Se(h),c(g)}};vf.prototype.b=function(a,b,c,d,e,f,g,h){b=R(this.a,c);A(d)&&(d=this.N(b,d));return new pf(a,0,0,c,d,e,f,g,h)};function wf(a,b,c,d,e,f,g,h,l){ff.call(this,a,0,d,e,f,g,h,l);this.a=c;this.l=C(e)?dd(c,e):r;this.d=this.e=m}F(wf,ff);function xf(a,b){a.e=m;a.d=m;a.t=m;if(A(b))if(E(b)){var c=Wc(b[a.a.b],a.a.type);if(a.b){var d;d=dd(a.a,a.f).type;a.d=c;a.e=Wc(b[a.f],d)}else a.e=c;a.t=a.ya?c:yf(b,a.a)}else a.t=b}
function zf(a,b,c){dd(a.a,a.f);var d=[],e=a.f,f=a.i,g=a.e;if(f!=r){var h=f.lower,l=f.upper,n=f.lowerOpen,f=f.upperOpen;a.j?l=l!=r&&-1==O(l,g)?l:g:h=h!=r&&1==O(h,g)?h:g;f=h!=r&&l!=r?Dc(h,l,!!n,!!f):h!=r?Ic.lowerBound(h,!!n):Ic.upperBound(l,!!f)}else f=a.j?Ic.upperBound(g):Ic.lowerBound(g);e=cd(a.a,d,a.k,e,f,a.j,a.unique);c=a.j?Ic.upperBound(c,s):Ic.lowerBound(c,s);c=cd(a.a,d,a.k,a.a.b,c,a.j,a.unique);e.m=e.m?e.m+(" AND "+c.m):c.m;c="SELECT "+e.select+" FROM "+e.ja+(e.m?" WHERE "+e.m:"")+(e.group?" GROUP BY "+
e.group:"")+" ORDER BY "+e.U;c+=" LIMIT 1";rb(a+": continuePrimary:  SQL: "+c+" : "+Q(d));a.c.executeSql(c,d,function(c,d){0<d.rows.length?xf(a,d.rows.item(0)):xf(a);b.call(a,a.e,a.d,a.t);b=r},function(c,d){a.Ca(d);xf(a);b.call(a,a.d,a.e,a.t);b=r;return s})}
function Af(a,b,c,d,e){var f=a.l.b,g=a.l.a,h=a.a.a,l=a.j?" <":" >",l=d?l+" ":l+"= ";d=Kc(c,a.l.type);e=Kc(e,a.a.type);var n="";a.i?(a=cd(a.a,b,a.k,f,a.i,a.j,a.unique),a.m+=" AND ",n=g+l+"?",b.push(d)):(c=a.j?Ec(c,q):Fc(c,q),a=cd(a.a,b,a.k,f,c,a.j,a.unique),n=a.m,a.m="");a.m+="("+n+" OR ("+g+" = ? AND "+h+l+"?))";b.push(d);b.push(e);return"SELECT "+a.select+" FROM "+a.ja+" WHERE "+a.m+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.U}
function Bf(a,b,c,d){var e,f,g,h;if(a.i!=r)if(e=a.i.lower,f=a.i.upper,g=a.i.lowerOpen,h=a.i.upperOpen,a.j)if(f!=r){var l=O(c,f);-1==l?(f=c,h=d):0==l&&(h=d||h)}else f=c,h=d;else e!=r?(l=O(c,e),1==l?(e=c,g=d):0==l&&(g=d||g)):(e=c,g=d);else a.j?(f=c,h=d):(e=c,g=d);c=new M(e,f,!!g,!!h);b=cd(a.a,b,a.k,a.l?a.l.b:a.a.b,c,a.j,a.unique);b="SELECT "+b.select+" FROM "+b.ja+(b.m?" WHERE "+b.m:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.U;a.b&&(b+=", "+a.a.a+(a.j?"DESC":"ASC"));return b}
function Cf(a,b,c,d,e,f){var g=!d;d=[];f!=r?c=Af(a,d,c,g,f):c!=r?c=Bf(a,d,c,g):(c=bd(a.a,d,a.k,!a.b?a.a.b:a.l.b,a.i,a.j,a.unique),a.b&&(c+=", "+a.a.a+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);rb(a+": continue:  SQL: "+c+" : "+Q(d));a.c.executeSql(c,d,function(c,d){0<d.rows.length?xf(a,d.rows.item(0)):xf(a);b.call(a,a.e,a.d,a.t);b=r},function(c,d){a.Ca(d);xf(a);b.call(a,a.d,a.e,a.t);b=r;return s})}x=wf.prototype;x.Ya=function(){return!!this.c};
x.update=function(a){this.Ya()||k(new Qd);var b=new G,c=this.d;a=kd(this.a,a,c);var d="REPLACE INTO "+ed(this.a)+" ("+a.Nb.join(", ")+") VALUES ("+a.Yb.join(", ")+") ON CONFLICT FAIL";rb(this+': clear "'+d+'" : '+Q(a.A));this.c.executeSql(d,a.A,function(){Ab(b,c)},function(a,c){H(b,c);return s});return b};
x.advance=function(a){var b=this.e,c=this.d,d=q;if(this.e!=r&&(!this.b||this.d!=r))a-=1,d=s;Cf(this,function(a,d,g){var h=b!=r&&a!=r&&0==O(b,a);if(this.b){var l=d!=r&&c!=r&&0==O(d,c);h&&l&&k(new Qc("current: "+b+";"+c+" next: "+a+";"+d))}else h&&k(new Qc("current: "+b+" next: "+a));this.v(a,d,g)},this.e,d,a,this.d)};x.ea=function(a){a!=r?Cf(this,this.v,a,q):this.advance(1)};x.qa=function(a,b){Cf(this,this.v,a,s,0,b)};
x.clear=function(){this.Ya()||k(new Qd);var a=new G,b=this.a.b,b="DELETE FROM "+ed(this.a)+" WHERE "+b+" = ?",c=[this.d];rb(this+': clear "'+b+'" : '+Q(c));this.c.executeSql(b,c,function(b,c){Ab(a,c.rowsAffected)},function(b,c){H(a,c);return s});return a};x.Ma=function(a,b){this.qa(b,a)};x.La=function(a){var b=O(a,this.d);(0==b||1==b&&this.j||-1==b&&!this.j)&&k(new wd(this+" to continuePrimaryKey  from "+this.d+" to "+a+" on "+this.M+" direction is wrong"));zf(this,this.v,a)};function Df(a,b){Ze.call(this,a,b)}F(Df,Ze);function yf(a,b){var c=a._default_?Ed(a._default_):{};if(b.keyPath!=r){var d=Wc(a[b.keyPath],b.type);d!=r&&jd(b,c,d)}for(d=0;d<b.indexes.length;d++){var e=b.indexes[d],f=e.b;if(!("_default_"==f||e.d||e.multiEntry)&&"DATE"==e.type)f=Wc(a[f],e.type),A(f)&&Vc(e,c,f)}return c}x=Df.prototype;x.ub=function(a,b,c,d,e,f,g,h){Ef(this,a,b,c,q,d,m,e,f,g,h,s)};x.tb=function(a,b,c,d,e,f,g,h,l,n){Ef(this,a,b,c,q,d,e,f,g,h,l,n)};
function Ef(a,b,c,d,e,f,g,h,l,n,p,w){var t=[],y=R(a.a,f),J=y.b;g!=r&&g!==J&&dd(y,g);a=[];g=bd(y,a,e?1:2,g||J,h,l,w);D(n)&&(g+=" LIMIT "+n);D(p)&&(g+=" OFFSET "+p);Q(a);b.executeSql(g,a,function(a,b){for(var c=b.rows.length,f=0;f<c;f++){var g=b.rows.item(f);e?t[f]=Wc(g[J],y.type):g!=r&&(t[f]=yf(g,y))}d(t)},function(a,b){d(b,q);return s})}x.nb=function(a,b,c,d,e,f){Ff(this,a,c,q,q,d,[e],[f])};x.Ab=function(a,b,c,d,e,f){Ff(this,a,c,s,q,d,[e],[f])};x.ob=function(a,b,c,d,e,f){Ff(this,a,c,q,s,d,e,f)};
function Ff(a,b,c,d,e,f,g,h){function l(a,b){var f;f=A(h)?kd(n,g[a],h[a]):kd(n,g[a]);var P=p+ed(n)+" ("+f.Nb.join(", ")+") VALUES ("+f.Yb.join(", ")+");";b.executeSql(P,f.A,function(d,h){function P(a,c){var d=p+sa("ydn.db.me:"+n.getName()+":"+a.getName())+" ("+n.a+", "+a.a+") VALUES (?, ?)",e=[Kc(S,n.type),c];b.executeSql(d,e,aa(),v(s))}t++;for(var S=A(f.key)?f.key:h.insertId,Y=0,Lc=n.indexes.length;Y<Lc;Y++){var Ib=n.index(Y);if(Ib.multiEntry)for(var be=Jb(g[a],Ib.keyPath),Lg=(!be?0:be.length)||
0,le=0;le<Lg;le++)P(Ib,be[le])}e?c(S):(w[a]=S,t==g.length?c(w):(Y=a+2,Y<g.length&&l(Y,d)))},function(b,f){t++;if(6==f.code){f.name="ConstraintError";if(e)c(f,q);else if(w[a]=r,t==g.length)c(w);else{var h=a+2;h<g.length&&l(h,b)}return d&&e?q:s}c(f,q);return s})}var n=R(a.a,f),p=d?"INSERT INTO ":"INSERT OR REPLACE INTO ",w=[],t=0;if(0<g.length)for(a=0;2>a&&a<g.length;a++)l(a,b);else c([])}x.Bb=function(a,b,c,d,e,f){Ff(this,a,c,s,s,d,e,f)};
x.zb=function(a,b,c,d,e){if(0==e.length)c([]);else{var f=[],g=0,h=0,l=this;b=function(b,n){for(var p=[],w=hd(R(l.a,b)),t=w?m:[],y=0;y<n.length;y++)p.push(d[n[y]]),w||t.push(e[n[y]].id);Ff(l,a,function(a,b){if(b)g++,g==h&&c(a,q);else{for(var d=0;d<n.length;d++)f[n[d]]=a[d];g++;g==h&&c(f)}},s,s,b,p,t)};for(var n="",p=[],w=[],t=0;t<e.length;t++){var y=e[t].a,J=e[t].id;y!=n?(h++,0<p.length&&b(n,p),p=[t],w=[J],n=y):(p.push(t),w.push(J))}0<p.length&&b(n,p)}};
x.Ua=function(a,b,c,d,e){var f=R(this.a,d);b=f.a;e=[Kc(e,f.type)];b="SELECT * FROM "+ed(f)+" WHERE "+b+" = ?";a.executeSql(b,e,function(a,b){if(0<b.rows.length){var d=b.rows.item(0);d!=r?(d=yf(d,f),c(d)):c(m)}else c(m)},function(a,b){c(b,q);return s})};
x.vb=function(a,b,c,d,e){function f(a,b){var d=l.a,t=[Kc(e[a],l.type)],d="SELECT * FROM "+ed(l)+" WHERE "+d+" = ?";b.executeSql(d,t,function(b,d){h++;if(0<d.rows.length){var p=d.rows.item(0);p!=r&&(g[a]=yf(p,l))}else g[a]=m;h==e.length?c(g):(p=a+10,p<e.length&&f(p,b))},function(b){h++;if(h==e.length)c(g);else{var d=a+10;d<e.length&&f(d,b)}return s})}var g=[],h=0,l=R(this.a,d);if(0<e.length)for(b=0;10>b&&b<e.length;b++)f(b,a);else c([])};x.Ba=function(a,b,c,d,e,f,g,h){Ef(this,a,b,c,s,d,m,e,f,g,h,s)};
x.Aa=function(a,b,c,d,e,f,g,h,l,n){Ef(this,a,b,c,s,d,e,f,g,h,l,n)};
x.wb=function(a,b,c,d){function e(a,b){var p=d[a],w=R(f.a,p.a),t=B(p.id)?p.id.join("^|"):p.id instanceof Date?+p.id:p.id,p=w.a,t=[Kc(t,w.type)],p="SELECT * FROM "+ed(w)+" WHERE "+p+" = ?";b.executeSql(p,t,function(b,f){h++;if(0<f.rows.length){var n=f.rows.item(0);n!=r&&(g[a]=yf(n,w))}else g[a]=m;h==d.length?c(g):(n=a+10,n<d.length&&e(n,b))},function(a,b){c(b,q);return s})}var f=this,g=[],h=0;if(0<d.length)for(b=0;10>b&&b<d.length;b++)e(b,a);else c([])};
x.Oa=function(a,b,c,d){function e(a,b){function l(a){a="DELETE FROM  "+sa("ydn.db.me:"+n.getName()+":"+a.getName());b.executeSql(a,[])}var n=R(f.a,d[a]),p="DELETE FROM  "+ed(n);b.executeSql(p,[],function(b){a==d.length-1?c(d.length):e(a+1,b)},function(a,b){c(b,q);return s});for(var p=0,w=n.indexes.length;p<w;p++){var t=n.index(p);t.multiEntry&&l(t)}}var f=this;0<d.length?e(0,a):c(0)};
x.Db=function(a,b,c,d){function e(b){if(b>=d.length)c(g,h);else{var n=R(f.a,d[b].a),p=Kc(d[b].id,n.type),w=" WHERE "+n.a+" = ?",t="DELETE FROM "+ed(n)+w;a.executeSql(t,[p],function(){g++;e(b)},function(){h=q;e(b);return s});b++;for(var t=function(b){b="DELETE FROM  "+sa("ydn.db.me:"+n.getName()+":"+b.getName())+w;a.executeSql(b,[p])},y=0,J=n.indexes.length;y<J;y++){var K=n.index(y);K.multiEntry&&t(K)}}}var f=this,g=0,h=s;e(0)};
x.bb=function(a,b,c,d,e){function f(b){b="DELETE FROM  "+sa("ydn.db.me:"+g.getName()+":"+b.getName())+l;a.executeSql(b,[h])}var g=R(this.a,d),h=Kc(e,g.type),l=" WHERE "+g.a+" = ?";b="DELETE FROM "+ed(g)+l;a.executeSql(b,[h],function(a,b){c(b.rowsAffected)},function(a,b){c(b,q);return s});b=0;for(d=g.indexes.length;b<d;b++)e=g.index(b),e.multiEntry&&f(e)};x.rb=function(a,b,c,d,e){Gf(this,a,c,d,m,e)};x.cb=function(a,b,c,d,e){Gf(this,a,c,d,m,e)};x.Cb=function(a,b,c,d,e,f){Gf(this,a,c,d,e,f)};
function Gf(a,b,c,d,e,f){function g(a){a="DELETE FROM  "+sa("ydn.db.me:"+h.getName()+":"+a.getName())+n;b.executeSql(a,l)}var h=R(a.a,d);a="DELETE FROM "+ed(h);d=[];var l=[],n="";f!=r&&(A(e)?(e=dd(h,e),Jc(e.a,e.type,f,l,d)):Jc(h.a,h.type,f,l,d),n=" WHERE "+l.join(" AND "));b.executeSql(a+n,d,function(a,b){c(b.rowsAffected)},function(a,b){c(b,q);return s});f=0;for(e=h.indexes.length;f<e;f++)a=h.index(f),a.multiEntry&&g(a)}
x.Qa=function(a,b,c,d){function e(b){var h="SELECT COUNT(*) FROM "+sa(d[b]);a.executeSql(h,[],function(a,h){var p=h.rows.item(0);f[b]=parseInt(p["COUNT(*)"],10);b++;b==d.length?c(f):e(b)},function(a,b){c(b,q);return s})}var f=[];0==d.length?c(0):e(0);return c};x.ha=function(a,b,c,d,e,f,g){b=[];d=bd(R(this.a,d),b,3,f,e,s,g);a.executeSql(d,b,function(a,b){var d=b.rows.item(0);c(Hf(d))},function(a,b){c(b,q);return s});return c};function If(a,b){Ze.call(this,a,b)}F(If,Df);If.prototype.d=function(a,b,c,d,e,f){Jf(this,a,b,c,d,1,e,f)};If.prototype.c=function(a,b,c,d,e,f){Jf(this,a,b,c,d,2,e,f)};function Jf(a,b,c,d,e,f,g,h){var l=[],n=Ye(e,b,c,a,f);n.d=function(a){Se(n);d(a,q)};var p=0,w=s;n.b=function(a){if(A(a)){var b=n.L(),c=n.X();!w&&0<h?(n.advance(h),w=q):(p++,l.push(1==f?a:e.d&&e.b?b:c),!A(g)||p<g?n.a[0].ea(m):(Se(n),d(l)))}else Se(n),d(l)}}
If.prototype.b=function(a,b,c,d,e,f,g,h){b=R(this.a,c);A(d)&&(d=this.N(b,d));return new wf(a,0,b,c,d,e,f,g,h)};function Kf(a){a?ea(a.abort)?a.abort():ea(a.executeSql)?a.executeSql("ABORT",[],aa(),v(q)):k(new rd):k(new Pd("No active transaction"))};/*
 _try.
*/
function Lf(a,b,c){this.g=a;this.b=0;this.a=[];this.na=this.c=r;this.p=new Mf(b);this.mb=c||0}x=Lf.prototype;x.p=r;x.mb=0;x.gc=function(){return this.p.b};x.na=r;x.type=function(){return this.g.f()};x.Qb=v(s);x.fc=function(){Kf(this.na)};
x.Ea=function(a,b,c,d){var e=C(b)?[b]:b,f=A(c)?c:I,g=this;if(this.p.a||(!this.g.b||!this.g.b.hb())&&0<(this.c!==r))this.a.push({Ta:a,F:b,mode:f,w:d});else{var h=Nf(this.p);this.c=d?[d]:[];this.mb&&this.gc()>=this.mb&&k(new Pc("Exceed maximum number of transactions of "+this.mb));this.g.transaction(function(c){var d=g.p;d.a=c;d.c=s;d.F=b;d.mode=f;d.b++;d.w=r;h=Nf(g.p);Q(b);a(g);for(a=r;g.Qb();)c=g.a.shift(),c.w&&g.c.push(c.w),c.Ta()},e,f,function(a,b){try{for(var c;c=g.c.shift();)c(a,b)}catch(d){}finally{c=
g.p,c.a&&(c.a=r,c.F=r,c.mode=r,ea(c.w)&&c.w(a,b),c.w=r),(c=g.a.shift())&&g.Ea(c.Ta,c.F,c.mode,c.w)}g.b=0})}};x.Lb=v(s);x.h=function(a,b,c,d,e){d=d||I;var f=this,g;if(f.p.a&&!f.p.c&&this.Lb(c,d)){var h=f.p.a;f.b++;g=Nf(f.p)+"R"+f.b;b(h,g,function(b,c){f.na=h;c?H(a,b):Ab(a,b);f.na=r});b=r}else f.Ea(function(){var c=f.p.a;f.b++;g=Nf(f.p)+"R"+f.b;b(c,g,function(b,d){f.na=c;d?H(a,b):Ab(a,b);f.na=r});b=r},c,d,e)};x.getName=function(){return this.g.getName()};function Of(a,b){Lf.call(this,a,b)}F(Of,Lf);Of.prototype.h=function(a,b,c,d,e){var f,g,h=new G;h.B(function(a){g=s;f=a},function(a){g=q;f=a});Of.G.h.call(this,h,b,c,d,function(b,c){if(g===q)H(a,f);else if(g===s)Ab(a,f);else{var d=new Kd;H(a,d)}e&&(e(b,c),e=m)})};function Pf(a,b,c){this.g=a;this.b=b;this.a=c;this.c=r}Pf.prototype.d=function(){this.a.fc()};function X(a){a.c||(a.c=a.g.xb());return a.c};function Z(a,b,c){Pf.call(this,a,b,c)}F(Z,Pf);x=Z.prototype;
x.count=function(a,b,c,d){var e=Db(),f=this,g,h,l;if(A(a))if(B(a)){(A(c)||A(b))&&k(new N("too many arguments."));g=a;for(a=0;a<g.length;a++)od(this.b,g[a])||k(new N('store name "'+g[a]+'" at '+a+" not found."));qb("countStores: "+Q(g));this.a.h(e,function(a,b,c){X(f).Qa(a,b,c,g)},g,I)}else C(a)?(od(this.b,a)||k(new N('store name "'+a+'" not found.')),g=[a],C(b)?(h=b,l=E(c)?Hc(c):r):E(b)||!A(b)?E(b)?l=Hc(b):(b!=r&&k(new N("key range must be  an object but found "+Fd(b)+" of type "+typeof b)),l=r):
k(new N("key range must be an object, but "+Fd(c)+" of type "+typeof b+" found.")),qb("countKeyRange: "+g[0]+" "+(h?h:"")+Q(l)),this.a.h(e,function(a,b,c){X(f).ha(a,b,c,g[0],l,h,!!d)},g,I)):k(new N("Invalid store name or store names."));else{(A(c)||A(b))&&k(new N("too many arguments."));g=nd(this.b);var n=new G;qb("countStores: "+Q(g));this.a.h(e,function(a,b,c){X(f).Qa(a,b,c,g)},g,I);e.B(function(a){a=ya(a,function(a,b){return b+a});Ab(n,a)},function(a){H(n,a)});return n}return e};
x.ra=function(a,b){var c=this,d=Db();if(a instanceof zc){var e=a.a;if(!od(this.b,e)){if(this.b.J())return Cb(m);k(new N("Store: "+e+" not found."))}var f=a.id;this.a.h(d,function(a,b,d){X(c).Ua(a,b,d,e,f)},[e],I)}else if(C(a)&&A(b)){if(!R(this.b,a)){if(this.b.J())return Cb(m);k(new N('Store name "'+a+'" not found.'))}if(b instanceof Ic||b instanceof M){var g=new G;g.B(function(a){Ab(d,a[0])},function(a){H(d,a)});var h=Hc(b);qb("getById: "+a+":"+Q(h));this.a.h(g,function(b,d,e){X(c).Ba(b,d,e,a,h,s,
1,0)},[a],I)}else this.a.h(d,function(d,e,f){X(c).Ua(d,e,f,a,b)},[a],I)}else k(new N("get require valid input arguments."));return d};
x.keys=function(a,b,c,d,e,f){var g=this,h,l,n=r,p=s,w=R(this.b,a);if(this.b.J()&&!w)return Cb([]);w=new G;C(b)?(n=Hc(c),D(d)?h=d:(A(d)&&k(new N("limit must be a number")),h=100),D(e)?l=e:(A(e)&&k(new N("offset must be a number")),l=0),A(f)&&(da?p=f:k(new N("reverse must be a boolean"))),this.a.h(w,function(c,d,e){X(g).tb(c,d,e,a,b,n,p,h,l,s)},[a],I)):(n=E(b)?Hc(b):r,D(c)?h=c:(A(c)&&k(new N("limit must be a number")),h=100),D(d)?l=d:(A(d)&&k(new N("offset must be a number")),l=0),A(e)&&(da(e)?p=e:
k(new N("reverse must be a boolean"))),this.a.h(w,function(b,c,d){X(g).ub(b,c,d,a,n,p,h,l)},[a],I));return w};
x.A=function(a,b,c,d,e,f){var g=this,h=Db(),l,n,p=s;if(C(a)){if(!R(this.b,a)){if(this.b.J())return Cb([]);k(new Rd(a))}if(B(b))this.a.h(h,function(c,d,e){X(g).vb(c,d,e,a,b)},[a],I);else if(C(b)){var w=Hc(c);A(d)?D(d)?l=d:k(new N("limit must be a number.")):l=100;A(e)?D(e)?n=e:k(new N("offset must be a number.")):n=0;da(f)?p=f:A(f)&&k(new N("reverse must be a boolean, but "+f));this.a.h(h,function(c,d,e){X(g).Aa(c,d,e,a,b,w,p,l,n,s)},[a],I)}else w=r,E(b)&&(w=Hc(b)),A(c)?D(c)?l=c:k(new N("limit must be a number, but "+
c+" is "+typeof c)):l=100,A(d)?D(d)?n=d:k(new N("offset must be a number, but "+d+" is "+typeof d)):n=0,A(e)&&(da(e)?p=e:k(new N("reverse must be a boolean, but "+e+" is "+typeof e))),this.a.h(h,function(b,c,d){X(g).Ba(b,c,d,a,w,p,l,n)},[a],I)}else if(B(a))if(a[0]instanceof zc){c=[];for(d=0;d<a.length;d++){e=a[d].a;if(!od(this.b,e)){if(this.b.J())return h=[],h[a.length-1]=m,Cb(h);k(new N("Store: "+e+" not found."))}0<=ua(c,e)||c.push(e)}qb("listByKeys: "+Q(c)+" "+a.length+" keys");this.a.h(h,function(b,
c,d){X(g).wb(b,c,d,a)},c,I)}else k(new N("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found."));else k(new N("first argument "+a+" is invalid."));return h};
x.jb=function(a,b,c){var d=C(a)?a:E(a)?a.name:m;C(d)||k(new N("store name "+d+" must be a string, but "+typeof d));var e=R(this.b,d);e?this.b.J()&&E(a)&&(a=ad(a),(a=ld(e,a))&&k(new rd(a))):(this.b.J()||k(new N('store name "'+d+'" not found.')),e=ad(E(a)?a:{name:d}),Qf(this.g,e));a=Db();var f=this;e||k(new N('store name "'+d+'" not found.'));C(e.keyPath)&&A(c)&&k(new N("key must not be provided while the store uses in-line key."));!e.keyPath&&(!e.autoIncrement&&!A(c))&&k(new N("out-of-line key must be provided."));
B(b)?(this.a.h(a,function(a,e,l){X(f).ob(a,e,l,d,b,c)},[d],L),e.Z&&a.S(function(a){wc(f.g,new Rf(Sf,f.g,e.getName(),a,b))})):E(b)?(id(e,b,c),this.a.h(a,function(a,e,l){X(f).nb(a,e,l,d,b,c)},[d],L),e.Z&&a.S(function(a){wc(f.g,new Tf(Sf,f.g,e.getName(),a,b))})):k(new N("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found."));return a};
function Uf(a,b){var c=C(b)?b:E(b)?b.name:m;C(c)||k(new N("store name must be a string"));var d=R(a.b,c);if(d){if(a.b.J()&&E(b)){var e=ad(b);(e=ld(d,e))&&k(new rd(e))}}else a.b.J()||k(new Rd(c)),d=ad(E(b)?b:{name:c}),Qf(a.g,d);d||k(new Rd(c));return d}
x.sa=function(a,b,c){var d=Db(),e=this;if(a instanceof zc){var d=a.a,f=R(this.b,d);f||k(new N('store "'+d+'" not found.'));if(f.keyPath){var g=id(f,b);g!=r?0!=O(g,a.id)&&k(new N("Inline key must be "+a+" but "+g+" found.")):jd(f,b,a.id);return this.sa(d,b)}return this.sa(d,b,a.id)}if(B(a)){A(c)&&k(new N("too many arguments"));for(var f=[],g=0,h=a.length;g<h;g++){var l=a[g].a;-1==ua(f,l)&&f.push(l);var n=R(this.b,l);n||k(new N('store "'+l+'" not found.'));n.keyPath&&jd(n,b[g],a[g].id)}qb("putByKeys: to "+
Q(f)+" "+b.length+" objects");this.a.h(d,function(c,d,f){X(e).zb(c,d,f,b,a)},f,L)}else if(C(a)||E(a)){var n=Uf(this,a),p=n.getName();n.keyPath&&A(c)&&k(new N("key must not be provided while the store uses in-line key."));!n.keyPath&&(!n.autoIncrement&&!A(c))&&k(new N("out-of-line key must be provided."));B(b)?(this.a.h(d,function(a,d,f){X(e).Bb(a,d,f,p,b,c)},[p],L),n.Z&&d.S(function(a){wc(e.g,new Rf(Vf,e.g,p,a,b))})):E(b)?(this.a.h(d,function(a,d,f){X(e).Ab(a,d,f,p,b,c)},[p],L),n.Z&&d.S(function(a){wc(e.g,
new Tf(Vf,e.g,p,a,b))})):k(new N("put record value must be Object or array of Objects"))}else k(new N("the first argument of put must be store name, store schema or array of keys."));return d};
x.clear=function(a,b){var c=Db(),d=this;if(C(a))if(R(this.b,a)||k(new N('store name "'+a+'" not found.')),E(b)){var e=Hc(b);e===r&&k(new N("clear method requires a valid non-null KeyRange object."));qb("clearByKeyRange: "+a+":"+Q(e));this.a.h(c,function(b,c,f){X(d).rb(b,c,f,a,e)},[a],L)}else A(b)&&k(new N("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+typeof b)),this.a.h(c,function(b,c,e){X(d).Oa(b,c,e,[a])},[a],L);else if(!A(a)||B(a)&&C(a[0])){var f=
a||nd(this.b);qb("clearByStores: "+Q(f));this.a.h(c,function(a,b,c){X(d).Oa(a,b,c,f)},f,L)}else k(new N('first argument "'+a+'" is invalid.'));return c};
x.kb=function(a,b,c){var d=Db(),e=this;if(C(a)){var f=R(this.b,a);f||k(new N('store name "'+a+'" not found.'));if(A(c))if(C(b)){var g=dd(f,b);g||k(new N("index: "+b+" not found in "+a));if(E(c)||c===r){var h=Hc(c);this.a.h(d,function(b,c,d){X(e).Cb(b,c,d,a,g.getName(),h)},[a],L)}else k(new N("key range "+c+' is invalid type "'+typeof c+'".'))}else k(new N('index name "'+b+'" must be a string, but '+typeof b+" found."));else C(b)||D(b)||ca(b)||b instanceof Date?(this.a.h(d,function(c,d,f){X(e).bb(c,
d,f,a,b)},[a],L),f.Z&&d.S(function(b){wc(e.g,new Tf(Wf,e.g,a,b,m))})):E(b)?(h=Hc(b),qb("removeByKeyRange: "+a+":"+Q(h)),this.a.h(d,function(b,c,d){X(e).cb(b,c,d,a,h)},[a],L),f.Z&&d.S(function(b){wc(e.g,new Rf(Wf,e.g,a,b,m))})):k(new N('Invalid key or key range "'+b+'" of type '+typeof b))}else if(a instanceof zc)this.a.h(d,function(b,c,d){X(e).bb(b,c,d,a.a,a.id)},[a.a],L);else if(B(a)){c=[];for(var f=0,l=a.length;f<l;f++){var n=a[f].a;-1==ua(c,n)&&c.push(n)}1>c.length&&k(new N('at least one valid key required in key list "'+
Fd(a)+'"'));this.a.h(d,function(b,c,d){X(e).Db(b,c,d,a)},c,L)}else k(new N('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+Fd(a)+'" ('+ba(a)+") found."));return d};function Xf(a,b,c){Pf.call(this,a,b,c)}F(Xf,Z);x=Xf.prototype;x.ra=function(a,b){var c=this;if(a instanceof V){var d=Db(),e=a.H,f=R(this.b,e);f||k(new N('store "'+e+'" not found.'));var g=a.N();A(g)&&!gd(f,g)&&k(new N('index "'+g+'" not found in store "'+e+'".'));f=new G;f.B(function(a){Ab(d,a[0])},function(a){H(d,a)});this.a.h(f,function(b,d,e){X(c).c(b,d,e,a,1)},[e],I);return d}return Xf.G.ra.call(this,a,b)};
x.keys=function(a,b,c,d,e){var f=this;if(a instanceof V){d=Db();var g=100;D(b)?(g=b,1>g&&k(new N("limit must be a positive value, but "+b))):A(b)&&k(new N("limit must be a number,  but "+b));A(c)&&k(new N("offset must not be specified"));this.a.h(d,function(b,c,d){X(f).d(b,c,d,a,g)},a.stores(),I);return d}return Xf.G.keys.call(this,a,b,c,d,e)};
x.count=function(a,b,c){var d=this;return a instanceof V?((A(b)||A(c))&&k(new N("too many arguments.")),b=Db(),this.a.h(b,function(b,c,g){X(d).ha(b,c,g,a.H,a.pc(),a.N(),a.Ga())},a.stores(),I),b):Xf.G.count.call(this,a,b,c)};
x.A=function(a,b,c,d,e,f){var g=this;if(a instanceof V){d=Db();var h;D(b)?(h=b,1>h&&k(new N("limit must be a positive value, but "+h))):A(b)&&k(new N("limit must be a number, but "+b));A(c)&&k(new N("offset must not be specified"));this.a.h(d,function(b,c,d){X(g).c(b,c,d,a,h)},a.stores(),I);return d}return Xf.G.A.call(this,a,b,c,d,e,f)};
x.bc=function(a,b){var c,d=Db(),e;e=b?b:r;var f=[];for(c=0;c<e.length;c++)for(var g=e[c].stores(),h=0;h<g.length;h++)0<=ua(f,g[h])||f.push(g[h]);var l=this;this.a.h(d,function(b,c,d){function f(){for(var a=0,d=0;d<e.length;d++){var w=Ye(e[d],b,c,X(l));w.d=g;w.b=la(h,a);S[d]=w;Wa[a]=d;a++}P=e.length}function g(a){for(var b=0;b<S.length;b++)Se(S[b]);Ca(S);d(a,q)}function h(b,c){K&&k(new td);Y++;var f=Y===P,g=Wa[b],l=e[g],n=S[g],g=n.L(),n=n.X();va[b]=c;Ka[b]=l.d?l.b?g:n:l.b?c:n;if(f){var p;p=a instanceof
gf?a.c(va,Ka):a(va,Ka);f=[];l=[];g=[];n=[];if(B(p))for(var t=0;t<p.length;t++)p[t]===q?g[t]=1:p[t]===s?n[t]=q:l[t]=p[t];else if(p===r)f=[];else if(A(p))E(p)?(f=p.continuePrimary||[],l=p["continue"]||[],g=p.advance||[],n=p.restart||[]):k(new vd("scan callback output"));else{f=[];for(t=0;t<e.length;t++)A(Wa[t])&&(g[t]=1)}for(t=Y=p=0;t<e.length;t++)f[t]==r&&(!A(l[t])&&n[t]==r&&g[t]==r)&&Y++;for(t=0;t<e.length;t++)if(f[t]!=r||A(l[t])||n[t]!=r||g[t]!=r){var y=Wa[t];A(y)||k(new vd(t+" is not an iterator."));
var y=e[y],J=S[t];va[t]=m;Ka[t]=m;n[t]!=r?(y=J,y.C=s,y.a[0].Ma(m,m)):A(l[t])?J.a[0].ea(l[t]):f[t]!=r?J.a[0].La(f[t]):g[t]!=r?J.advance(1):k(new td(y+": has no action"));p++}if(0==p){for(f=0;f<S.length;f++)Se(S[f]);K=q;Ca(S);d(m)}}}var K=s,P,Wa=[],va=[],Ka=[],S=[],Y=0;a instanceof gf?a.b(e,function(){f()})||f():f()},f,I);return d};
x.ac=function(a,b,c){b instanceof V||k(new N("Second argument must be cursor range iterator."));R(this.b,b.H)||k(new N('Store "'+b.H+'" not found.'));c=c||I;var d=this,e=Db();this.a.h(e,function(c,e,h){var l=Ye(b,c,e,X(d));l.d=function(a){h(a,q)};l.b=function(b){if(b!=r){var c=a(l);c===q?(l.C=s,l.a[0].Ma(m,m)):E(c)?c.restart===q?(b=c["continue"],c=c.continuePrimary,l.C=s,l.a[0].Ma(c,b)):c["continue"]!=r?l.a[0].ea(c["continue"]):c.continuePrimary!=r?l.a[0].La(c.continuePrimary):(Se(l),h(m)):l.advance(1)}else Se(l),
h(m)}},b.stores(),c);return e};x.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)e||k(new N('Store "'+e+'" not found.'));e=Db();this.a.h(e,function(d,e,f){var n=Ye(a,d,e,X(c));n.d=function(a){f(a,s)};n.b=function(c){c!=r?(b(a.d?a.b?c:n.L():a.b?c:n.X()),n.advance(1)):(f(m),b=r)}},d,I);return e};
x.ib=function(a,b,c){for(var d=this,e=a.stores(),f,g=0;f=e[g];g++)f||k(new N('Store "'+f+'" not found.'));f=Db();var h=E(c)?Ed(Q(c)):c;this.a.h(f,function(c,e,f){var g=Ye(a,c,e,X(d));g.d=function(a){f(a,q)};var t=0;g.b=function(c){c!=r?(h=b(h,a.d?a.b?c:g.L():a.b?c:g.X(),t++),g.advance(1)):f(h)}},e,I);return f};var Sf="created",Wf="deleted",Vf="updated";function Yf(a,b){Zb.call(this,a,b)}F(Yf,Zb);Yf.prototype.e=u("c");function Zf(a,b,c,d,e){Zb.call(this,a,b);this.version=c;this.cc=d;this.error=e}F(Zf,Yf);x=Zf.prototype;x.name="StorageEvent";x.version=NaN;x.cc=NaN;x.error=r;x.Qc=u("version");x.nc=u("cc");x.Pc=u("error");function Tf(a,b,c,d,e){Zb.call(this,a,b);this.c=c;this.key=d;this.value=e}F(Tf,Yf);Tf.prototype.name="RecordEvent";Tf.prototype.f=u("key");Tf.prototype.k=u("value");
function Rf(a,b,c,d,e){Zb.call(this,a,b);this.c=c;this.keys=d;this.A=e}F(Rf,Yf);Rf.prototype.name="StoreEvent";Rf.prototype.$=u("keys");Rf.prototype.Va=u("A");function Xd(a,b){md.call(this,a,b)}F(Xd,md);Xd.prototype.J=v(q);function Jd(a,b){a.stores.push(b)};function Zc(a,b){var c;c=c||{};if(a==r||b==r)return s;if(B(a)&&B(b)){if(a.length!=b.length)return s;for(var d=0;d<a.length;d++)if(-1==Aa(b,function(b){return Zc(b,a[d])}))return s;return q}if(B(a))return 1==a.length&&Zc(a[0],b);if(B(b))return 1==b.length&&Zc(b[0],a);if(E(a)&&E(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=Zc(a[e],b[e]);if(!f)return s}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=Zc(a[e],b[e]),!f))return s;return q}return a===b}
function Hf(a){for(var b in a)if(a.hasOwnProperty(b))return a[b]};function $f(){};function ag(){}F(ag,$f);ag.prototype.va=function(){var a=0;Oa(this.fa(q),function(){a++});return a};ag.prototype.clear=function(){var a=Pa(this.fa(q)),b=this;wa(a,function(a){b.s.removeAttribute(bg(a));cg(b)})};function dg(a,b){if(bb&&!(bb&&9<=ob)){eg||(eg=new Qa);var c=eg;this.s=Object.prototype.hasOwnProperty.call(c.b,a)?c.b[a]:m;this.s||(b?this.s=document.getElementById(b):(this.s=document.createElement("userdata"),this.s.addBehavior("#default#userData"),document.body.appendChild(this.s)),Ra(eg,a,this.s));this.Eb=a;try{this.s.load(this.Eb)}catch(d){this.s=r}}}F(dg,ag);var fg={".":".2E","!":".21","~":".7E","*":".2A","'":".27","(":".28",")":".29","%":"."},eg=r;x=dg.prototype;x.s=r;x.Eb=r;
function bg(a){return"_"+encodeURIComponent(a).replace(/[.!~*'()%]/g,function(a){return fg[a]})}x.va=function(){return gg(this).attributes.length};x.fa=function(a){var b=0,c=gg(this).attributes,d=new Ma;d.a=function(){b>=c.length&&k(La);var d=c[b++];if(a)return decodeURIComponent(d.nodeName.replace(/\./g,"%")).substr(1);d=d.nodeValue;C(d)||k("Storage mechanism: Invalid value was encountered");return d};return d};
x.clear=function(){for(var a=gg(this),b=a.attributes.length;0<b;b--)a.removeAttribute(a.attributes[b-1].nodeName);cg(this)};function cg(a){try{a.s.save(a.Eb)}catch(b){k("Storage mechanism: Quota exceeded")}}function gg(a){return a.s.XMLDocument.documentElement};function hg(){Ie.call(this,this)}F(hg,Ie);hg.prototype.Pa=function(a){return new ig(a)};hg.prototype.pa=v("userdata");function ig(a){this.g=new dg(a);this.length=this.keys().length}x=ig.prototype;x.length=0;x.clear=function(){this.g.clear();this.a=[]};x.keys=function(){this.a||(this.a=[],Oa(this.g,function(a){this.a.push(a)},this));return this.a};x.key=function(a){return this.keys()[a]};x.setItem=function(a,b){this.a&&this.a.push(a);var c=this.g;c.s.setAttribute(bg(a),b);cg(c)};
x.getItem=function(a){a=this.g.s.getAttribute(bg(a));!C(a)&&a!==r&&k("Storage mechanism: Invalid value was encountered");return A(a)?a:r};x.removeItem=function(a){this.a=r;var b=this.g;b.s.removeAttribute(bg(a));cg(b)};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function W(a,b,c){vc.call(this);c=c||{};this.tc=c.mechanisms||jg;this.Cc=c.size;this.uc=A(c.connectionTimeout)?c.connectionTimeout:18E5;this.Zb=A(c.Zb)?c.Zb:s;this.b=r;this.l=[];this.k=s;var d;if(b instanceof md)d=b;else if(E(b)){d=c.autoSchema||!A(b.stores)?new Xd(b):new md(b);var e=e=b.stores?b.stores.length:0;for(c=0;c<e;c++)R(d,b.stores[c].name)}else d=new Xd;this.a=d;A(a)&&this.Ub(a)}F(W,vc);
W.prototype.yc=function(a){if(A(a)){var b=function(b){a(b.toJSON())};if(this.b)this.b.I(b);else{var c=this;this.transaction(function(a){c.b.I(b,a)},r,I)}}return this.a?this.a.toJSON():r};function Qf(a,b){var c=b instanceof $c?b:ad(b),d=R(a.a,b.name);0==ld(c,d).length?Cb(s):a.a instanceof Xd?(Jd(a.a,c),a.b?(a.b.gb(),a.b=r,kg(a)):Cb(s)):k(new ud(""))}W.prototype.Ub=function(a){this.b&&k(Error("Already defined with "+this.d));this.d=a;kg(this)};W.prototype.getName=u("d");var jg="indexeddb websql localstorage sessionstorage userdata memory".split(" ");
function lg(a,b){return"indexeddb"==b?new Gd(0,a.uc):"websql"==b?new Vd(a.Cc):"localstorage"==b?new Je:"sessionstorage"==b?new Le:"memory"==b?new Ie:"userdata"==b?new hg:r}
function kg(a){function b(b,d){b?(a.Bc=NaN,yc(function(){a.onReady(d);mg(a)}),Ab(c,d)):(yc(function(){a.onReady(d);if(a.l)for(var b;b=a.l.shift();)b.w&&b.w("error",d)}),H(c,d))}for(var c=new G,d=r,e=a.tc,f=0;f<e.length;f++){var g=e[f].toLowerCase();if("indexeddb"==g&&Id){d=lg(a,g);break}else if("websql"==g&&ea(z.openDatabase)){d=lg(a,g);break}else if("localstorage"==g&&window.localStorage){d=lg(a,g);break}else if("sessionstorage"==g&&window.sessionStorage){d=lg(a,g);break}else if("memory"==g){d=lg(a,
g);break}else if("userdata"==g){d=lg(a,g);break}}d===r?(e=new ud("No storage mechanism found."),b(s,new Zf("ready",a,NaN,NaN,e))):d.oa(a.d,a.a).B(function(a){this.b=d;b(q,new Zf("ready",this,parseFloat(d.Hb()),parseFloat(a),r));d.d=aa()},function(a){var c=new Zf("ready",this,NaN,NaN,a);c.message=a.message;b(s,c)},a)}W.prototype.f=function(){if(this.b)return this.b.pa()};W.prototype.onReady=function(a){wc(this,a)};W.prototype.sc=function(){this.b&&(this.b.gb(),this.b=r)};W.prototype.Bc=NaN;
function mg(a){var b=a.l.shift();b&&a.transaction(b.Ta,b.zc,b.mode,b.w);ma()}W.prototype.k=s;W.prototype.transaction=function(a,b,c,d){var e=b;C(b)?e=[b]:b!=r||(e=r);if(!this.b||!this.b.hb()||this.k)this.l.push({Ta:a,zc:e,mode:c,w:d});else{var f=this,g=A(c)?c:I;g==Gb&&(this.k=q);this.b.Sa(function(b){a(b);a=r},e,g,function(a,b){ea(d)&&(d(a,b),d=m);g==Gb&&(f.k=s);mg(f)})}};function ng(a,b,c,d){this.c=a;this.a=Ea(c);this.b=d;this.d=[]}ng.prototype.c=r;function og(a,b,c){a.c?(c&&a.d.push(c),b(a.c)):k(new Qc("tx committed on ParallelTxExecutor"))};function pg(a,b,c,d,e,f){this.g=a;this.d=b;this.Na=0;this.ab=this.V=r;this.c=d;this.b=e;this.a=c||"single";this.lb=f||0}x=pg.prototype;x.Na=0;x.lb=0;x.V=r;x.ab=r;x.gc=u("Na");x.type=function(){return this.g.f()};x.fc=function(){Kf(this.ab)};
x.hc=function(a,b){var c;if("multi"==this.a)a:if(c=this.V,!c.a||!c.b||b!=c.b&&(c.b!=L||b!=I)||a.length>c.a.length)c=s;else{for(var d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=s;break a}c=q}else if("repeat"==this.a)a:if(c=this.V,!c.a||!c.b||b!=c.b||c.a.length!=a.length)c=s;else{for(d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=s;break a}c=q}else c="all"==this.a?q:s;return c};
x.Ea=function(a,b,c,d){function e(c){h.Na++;l=new ng(c,0,b,g);Q(b);h.V=l;og(h.V,a,d)}function f(a,b){for(var c=l,d;d=c.d.shift();)d(a,b);c.c=r;c.a=r;c.d=r}this.c&&(b=this.c);this.b&&(c=this.b);var g=A(c)?c:I,h=this,l;this.V&&this.V.c&&this.hc(b,g)?og(this.V,a,d):(this.lb&&this.Na>=this.lb&&k(new Pc("Exceed maximum number of transactions of "+this.lb)),this.g.transaction(e,b,g,f))};
x.h=function(a,b,c,d,e){var f=this;this.Ea(function(c){f.e++;b(c,"B"+f.d+"T"+f.Na,function(b,d){f.ab=c;d?H(a,b):Ab(a,b);f.ab=r});b=r},c,d,e)};function qg(a,b){pg.call(this,a,b,"single")}F(qg,pg);qg.prototype.hc=v(s);qg.prototype.h=function(a,b,c,d,e){var f,g,h=new G;h.B(function(a){g=s;f=a},function(a){g=q;f=a});qg.G.h.call(this,h,b,c,d,function(b,c){if(g===q)H(a,f);else if(g===s)Ab(a,f);else{var d=new Kd;H(a,d)}e&&(e(b,c),e=m)})};function Mf(a){this.d=a;this.a=r;this.b=0}Mf.prototype.F=r;function rg(a,b,c){if(!a.F||!a.mode||c!=a.mode||a.F.length!=b.length)return s;for(c=0;c<b.length;c++)if(-1==a.F.indexOf(b[c]))return s;return q}Mf.prototype.w=r;function Nf(a){return"B"+a.d+"T"+a.b};function sg(a,b){Lf.call(this,a,b)}F(sg,Lf);sg.prototype.Lb=function(a,b){var c;a:if(c=this.p,!c.F||!c.mode||b!=c.mode&&(c.mode!=L||b!=I)||a.length>c.F.length)c=s;else{for(var d=0;d<a.length;d++)if(-1==c.F.indexOf(a[d])){c=s;break a}c=q}return c};function tg(a,b){Lf.call(this,a,b)}F(tg,Lf);tg.prototype.Lb=function(a,b){return rg(this.p,a,b)};tg.prototype.Qb=function(){var a=this.p;return!!a&&rg(a,0<this.a.length?this.a[0].F:r,0<this.a.length?this.a[0].mode:r)};function ug(a,b,c){W.call(this,a,b,c);this.W=0;a=q;b="single";c&&(A(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=vg(this,b,a);this.c=this.ma(c,r)}F(ug,W);x=ug.prototype;x.W=0;x.ic=function(a,b,c,d,e){var f;"readonly"==d?f=I:"readwrite"==d&&(f=L);a=vg(this,a,b,c,f,e);return this.ma(a,r)};x.ma=function(a){return new Pf(this,this.a,a)};
function vg(a,b,c,d,e,f){if(c){if("multi"==b)return new sg(a,a.W++);if("repeat"==b)return new tg(a,a.W++);if("atomic"==b)return new Of(a,a.W++);if("single"==b)return new Lf(a,a.W++,f);k(new N('Invalid requestType "'+b+'"'))}if("multi"==b||"repeat"==b||"all"==b||"single"==b)return new pg(a,a.W++,b,d,e,f);if("atomic"==b)return new qg(a,a.W++);k(new N('Invalid requestType "'+b+'"'))}x.Rc=function(){this.c.d()};
x.xc=function(a,b,c,d,e){this.W++;var f=I;c&&("readwrite"==c?f=L:"readonly"!=c&&k(new N('Invalid transaction mode "'+c+'"')));var g=vg(this,"all",s,b,f,1),h=this.ma(g,r);b!=r||(b=nd(this.a));var l=a;if(4<arguments.length)var n=Array.prototype.slice.call(arguments,4),l=function(){var b=Array.prototype.slice.call(arguments),b=b.concat(n);return a.apply(this,b)};g.Ea(function(){l(h);l=r},b,f,d)};function $(a,b,c){ug.call(this,a,b,c)}F($,ug);x=$.prototype;x.ma=function(a){return new Z(this,this.a,a)};x.xb=function(){var a=this.f();if("indexeddb"==a)return new kf(this.d,this.a);if("websql"==a)return new Df(this.d,this.a);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new sf(this.d,this.a);k(new Od("No executor for "+a))};x.jb=function(a,b,c){return this.c.jb(a,b,c)};x.count=function(a,b,c,d){return this.c.count(a,b,c,d)};x.ra=function(a,b){return this.c.ra(a,b)};
x.keys=function(a,b,c,d,e,f){return this.c.keys(a,b,c,d,e,f)};x.A=function(a,b,c,d,e,f){return this.c.A(a,b,c,d,e,f)};x.sa=function(a,b,c){return this.c.sa(a,b,c)};x.clear=function(a,b,c){return this.c.clear(a,b,c)};x.kb=function(a,b,c){return this.c.kb(a,b,c)};function wg(a,b,c){ug.call(this,a,b,c)}F(wg,$);x=wg.prototype;x.xb=function(){var a=this.f();if("indexeddb"==a)return new mf(this.d,this.a);if("websql"==a)return new If(this.d,this.a);if("memory"==a||"userdata"==a||"localstorage"==a||"sessionstorage"==a)return new vf(this.d,this.a);k(new Od("No executor for "+a))};x.ma=function(a){return new Xf(this,this.a,a)};x.Nc=function(a,b,c){return this.c.ac(a,b,c)};x.Oc=function(a,b){return this.c.bc(a,b)};x.map=function(a,b){return this.c.map(a,b)};
x.ib=function(a,b,c){return this.c.ib(a,b,c)};function xg(a){this.a=a}xg.prototype.a=[];
xg.prototype.b=function(a,b){for(var c=[],d=0;d<this.a.length;d++){var e=this.a[d],f="'"===e[0]&&"'"===e[e.length-1];if('"'===e[0]&&'"'===e[e.length-1])e=Ha(a,pa(e,'"').split(".")),c.push(e);else if(f)c.push(pa(e,"'"));else if(C(e))if("true"===e)c.push(q);else if("false"===e)c.push(s);else if("Date"===e)c.push(new Date(parseInt(c.pop(),10)));else if("now"===e)c.push(new Date);else if("!"===e)c[c.length-1]=!c[c.length-1];else if("=="===e)c.push(c.pop()==c.pop());else if("==="===e)c.push(c.pop()===
c.pop());else if("!="===e)c.push(c.pop()!=c.pop());else if("!=="===e)c.push(c.pop()!==c.pop());else if("<="===e)c.push(c.pop()<=c.pop());else if("<"===e)c.push(c.pop()<c.pop());else if(">="===e)c.push(c.pop()>=c.pop());else if(">"===e)c.push(c.pop()>c.pop());else if("&"===e)c.push(c.pop()&c.pop());else if("|"===e)c.push(c.pop()|c.pop());else if("?"===e){var e=!!c.pop(),f=c.pop(),g=c.pop(),e=e?f:g;c.push(e)}else"+"===e?c.push(c.pop()+c.pop()):"-"===e?c.push(c.pop()-c.pop()):"*"===e?c.push(c.pop()*
c.pop()):"/"===e?c.push(c.pop()/c.pop()):"%"===e?c.push(c.pop()%c.pop()):"at"===e?(f=c.pop(),e=c.pop(),c.push(e[f])):"of"===e?(f=c.pop(),e=c.pop(),e=B(e)?e.indexOf(f):-1,c.push(e)):"in"===e?(f=c.pop(),e=c.pop(),e=B(e)?0<=e.indexOf(f):s,c.push(e)):"abs"===e?c[c.length-1]=Math.abs(c[c.length-1]):"$"==e[0]&&/^\$\d$/.test(e)?(e=parseInt(e.match(/^\$(\d)$/)[1],10),c.push(arguments[e])):c.push(parseFloat(e));else c.push(e)}return c[0]};
xg.prototype.c=function(){return function(){var a=2<arguments.length?Array.prototype.slice(arguments,2):m;return xg.prototype.b.apply(r,a)}};xg.prototype.toJSON=function(){return{Tokens:Ed(Q(this.a))}};function yg(a){C(a)||k(new qd);this.D=a;zg(this,a);this.Ha=""}x=yg.prototype;x.D="";x.Ia=I;x.Tb=NaN;x.Wb=NaN;x.Fb=s;x.Ha="";
function zg(a,b){var c=b.split(/\sFROM\s/i);2!=c.length&&k(new Ud("FROM required."));var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);3!=c.length&&k(new Ud("Unable to parse: "+b));a.c=c[1].toUpperCase();"SELECT"==a.c?a.Ia=I:"INSERT"==a.c?a.Ia=L:"UPDATE"==a.c?a.Ia=L:"DELETE"==a.c?a.Ia=L:k(new Ud("Unknown SQL verb: "+a.c));var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.d=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):a.d=m;"("==c.charAt(0)&&
(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-1):new Ud("missing closing parentheses"));a.l=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.a=d.substring(c),d=d.substring(0,c)):a.a="";c=d.search(/WHERE/i);0<c?(a.e=d.substring(c+6).trim(),d=d.substring(0,c)):a.e="";a.b=d.trim().split(",").map(function(a){a=pa(a,'"');a=pa(a,"'");return a.trim()})}
function Ag(a,b){if(b){for(var c=0;c<b.length;c++)a.D=a.D.replace("?",b[c]);zg(a,a.D)}a.f=Bg(a);if(!a.f)return a.Ha;var c=a.a.length,d=/OFFSET\s+(\d+)/i.exec(a.a);d&&(a.Wb=parseInt(d[1],10),c=a.a.search(/OFFSET/i));if(d=/LIMIT\s+(\d+)/i.exec(a.a))a.Tb=parseInt(d[1],10),d=a.a.search(/LIMIT/i),d<c&&(c=d);(c=/ORDER BY\s+(.+)/i.exec(a.a.substr(0,c)))?(c=c[1].trim(),(d=c.match(/(ASC|DESC)/i))?(a.Fb="DESC"==d[0].toUpperCase(),c=c.replace(/\s+(ASC|DESC)/i,"")):a.Fb=s,a.k=pa(pa(c,'"'),"'")):a.k=m;return""}
function Cg(a){if("*"==a.l)return r;a=a.l.split(",");return a=a.map(function(a){return pa(a.trim(),'"')})}x.toJSON=function(){return{sql:this.D}};
function Bg(a){function b(a){return Ba(c,function(b){return b.da==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.e.length)for(var e=a.e.split("AND"),f=0;f<e.length;f++){var g=e[f],h=d.exec(g);if(h){var l=h[1].trim(),l=pa(l,'"'),l=pa(l,"'");if(0<l.length){var n=h[3].trim(),n=0==n.lastIndexOf('"',0)?pa(n,'"'):0==n.lastIndexOf("'",0)?pa(n,"'"):parseFloat(n),h=new Te(l,h[2],n),l=b(l);if(0<=l){if(c[l]=c[l].pb(h),!c[l])return a.Ha='where clause "'+g+'" conflict',r}else c.push(h)}else return a.Ha='Invalid clause "'+
g+'"',r}else return a.Ha='Invalid clause "'+g+'"',r}return c}x.toString=function(){return yg.G.toString.call(this)};function Dg(a,b){this.sql=b;this.a=a}Dg.prototype.toJSON=function(){return{sql:this.sql}};Dg.prototype.toString=v("idb.Node:");
Dg.prototype.Kb=function(a,b,c,d){var e=Ea(this.sql.b)[0],f=this.sql.f,g=this.sql.Tb,g=isNaN(g)?100:g,h=this.sql.Wb,h=isNaN(h)?0:h,l=this.sql.k,n=Cg(this.sql),p=r,w=this.sql.Fb;0==f.length?p=r:1==f.length?p=Hc(f[0].a):k(new Nc("too many conditions."));var t=c;n===r||(t=function(a,b){if(b)c(a,q);else{var d=a.map(function(a){var b=n.length;if(1==b)return Jb(a,n[0]);for(var c={},d=0;d<b;d++)c[n[d]]=Jb(a,n[d]);return c});c(d)}});f=0<f.length?f[0].da:m;l&&l!=this.a.keyPath?d.Aa(a,b,t,e,l,p,w,g,h,s):A(f)&&
f!=this.a.keyPath?d.Aa(a,b,t,e,f,p,w,g,h,s):d.Ba(a,b,t,e,p,w,g,h)};function Eg(a,b){Dg.call(this,a,b)}F(Eg,Dg);
Eg.prototype.Kb=function(a,b,c,d){var e,f=Ea(this.sql.b)[0],g=this.sql.f,h=r;0==g.length?h=r:1==g.length?h=Hc(g[0].a):k(new Nc("too many conditions."));var l=this.sql.d,g=0<g.length?g[0].da:m;if("COUNT"==l)h?d.ha(a,b,c,f,h,g,s):d.ha(a,b,c,f,r,m,s);else{var n,p=Cg(this.sql);(!p||0==p.length)&&k(new wd("field name require for reduce operation: "+l));p=p[0];"MIN"==l?n=Fg(p):"MAX"==l?n=Gg(p):"AVG"==l?(e=0,n=Hg(p)):"SUM"==l?(e=0,n=Ig(p)):k(new rd(l));var w;w=A(g)?new Xe(f,g,h):new We(f,h);var t=Ye(w,a,
b,d);t.d=function(a){c(a,q)};var y=0;t.b=function(a){a!=r?(e=n(w.b?t.L():t.X(),e,y),t.advance(1),y++):c(e)}}};function Hg(a){return function(b,c,d){A(c)||(c=0);return(c*d+b[a])/(d+1)}}function Ig(a){return function(b,c){return c+b[a]}}function Fg(a){return function(b,c){var d=b[a];return!A(c)?d:c<d?c:d}}function Gg(a){return function(b,c){var d=b[a];return!A(c)?d:c>d?c:d}};function Jg(a,b){Ze.call(this,a,b)}F(Jg,mf);Jg.prototype.executeSql=function(a,b,c,d,e){(e=Ag(d,e))&&k(new Ud(e));e=Ea(d.b);if(1==e.length){var f=R(this.a,e[0]);f||k(new Rd(e[0]));var g=Cg(d);if(g)for(var h=0;h<g.length;h++)gd(f,g[h])||k(new Rd('Index "'+g[h]+'" not found in '+e[0]));(d.d?new Eg(f,d):new Dg(f,d)).Kb(a,b,c,this)}else k(new rd(d.D))};function Kg(a,b){this.sql=b;this.b=a;this.a=Cg(b)}Kg.prototype.toJSON=function(){return{sql:this.sql.D}};Kg.prototype.toString=v("websql.Node:");function Mg(a,b){if(a.a){if(1==a.a.length){if(E(b))return Ha(b,a.a[0]);return}for(var c={},d=0;d<a.a.length;d++)c[a.a[d]]=Ha(b,a.a[d]);return c}return yf(b,a.b)}
Kg.prototype.ec=function(a,b,c){var d=this,e=[];b.executeSql(this.sql.D,c,function(b,c){for(var h=c.rows.length,l=0;l<h;l++){var n=c.rows.item(l);if(E(n))var p=Mg(d,n);e.push(p)}a(e)},function(b,c){a(c,q);return q})};function Ng(a,b){Kg.call(this,a,b)}F(Ng,Kg);Ng.prototype.ec=function(a,b,c){b.executeSql(this.sql.D,c,function(b,c){var f=c.rows.length;1==f?(f=Hf(c.rows.item(0)),a(f)):0==f?a(m):k(new Od)},function(b,c){a(c,q);return q})};function Og(a,b){Ze.call(this,a,b)}F(Og,If);Og.prototype.executeSql=function(a,b,c,d,e){b=Ea(d.b);if(1==b.length){var f=R(this.a,b[0]);f||k(new Rd(b[0]));var g=Cg(d);if(g)for(var h=0;h<g.length;h++)gd(f,g[h])||k(new Rd('Index "'+g[h]+'" not found in '+b[0]));(d.d?new Ng(f,d):new Kg(f,d)).ec(c,a,e)}else k(new rd(d.D))};function Pg(a,b){Ze.call(this,a,b)}F(Pg,vf);Pg.prototype.executeSql=function(a,b,c,d,e){(e=Ag(d,e))&&k(new Ud(e));e=Ea(d.b);if(1==e.length){var f=R(this.a,e[0]);f||k(new Rd(e[0]));var g=Cg(d);if(g)for(var h=0;h<g.length;h++)gd(f,g[h])||k(new N('Index "'+g[h]+'" not found in '+e[0]));(d.d?new Eg(f,d):new Dg(f,d)).Kb(a,b,c,this)}else k(new Nc(d.D))};function Qg(a,b,c){Pf.call(this,a,b,c)}F(Qg,Xf);Qg.prototype.executeSql=function(a,b){for(var c=Db(),d=new yg(a),e=Ea(d.b),f=0;f<e.length;f++){var g=R(this.b,e[f]);g||k(new N("store: "+g+" not exists."))}var h=this;this.a.h(c,function(a,c,e){X(h).executeSql(a,c,e,d,b||[])},Ea(d.b),d.Ia);return c};function Rg(a,b,c){ug.call(this,a,b,c)}F(Rg,wg);Rg.prototype.xb=function(){var a=this.f();if("indexeddb"==a)return new Jg(this.d,this.a);if("websql"==a)return new Og(this.d,this.a);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new Pg(this.d,this.a);k(new Od("No executor for "+a))};Rg.prototype.ma=function(a){return new Qg(this,this.a,a)};Rg.prototype.executeSql=function(a,b){return this.c.executeSql(a,b)};function Sg(a,b,c){ug.call(this,a,b,c)}F(Sg,Rg);function Tg(a,b){gf.call(this,a,b)}F(Tg,gf);Tg.prototype.b=v(s);Tg.prototype.c=function(a,b){function c(b){A(a[b])?(e=s,d[b]=q):(d[b]=s,0<=b-1&&c(b-1))}var d=[],e=q;c(a.length-1);e&&(d=[]);return hf(this,d,b)};function Ug(a,b){gf.call(this,a,b);this.d=a instanceof df&&!!a.Ka}F(Ug,gf);Ug.prototype.d=s;Ug.prototype.b=function(a,b){var c=Ug.G.b.call(this,a,b);if(this.d){var d=a[0].N().split(", ");1<d.length&&d[d.length-1]!=this.a.Ka&&k(new wd("Output streamer projection field must be same as postfix field in the iterator"))}return c};
Ug.prototype.c=function(a,b){function c(a,b){var c=a.slice(0,a.length-1);c.push(b);return c}var d=[];if(0==a.length||a[0]==r||a[0]==r)return[];for(var e=q,f=0,g=a[f][a[f].length-1],h=[],l=1;l<a.length;l++)if(a[l]!=r){var n=a[l][a[l].length-1],p=O(g,n);h[l]=p;1===p?e=s:-1===p&&(e=s,g=n,f=1)}else return[];if(e){for(e=0;e<a.length;e++)a[e]!=r&&(d[e]=q);this.a&&(this.d?this.a.push(b[0],g):this.a.push(b[0]));return d}if(0==f)for(e=1;e<a.length;e++)1===h[e]&&(d[e]=c(a[e],g));else for(e=0;e<a.length;e++)e!=
f&&a[e]!=r&&1===O(g,a[e][a[e].length-1])&&(d[e]=c(a[e],g));return{"continue":d}};function Vg(a,b){gf.call(this,a,b)}F(Vg,gf);Vg.prototype.b=v(s);Vg.prototype.c=function(a,b){var c=[],d=b[0];if(d==r)return[];for(var e=q,f=s,g=d,h=[],l=1;l<a.length;l++)if(b[l]!=r){var n=O(d,b[l]);h[l]=n;1===n?e=s:-1===n&&(e=s,f=q,1===O(b[l],g)&&(g=b[l]))}else e=s,f=q;if(e)for(f=0;f<a.length;f++)b[f]!=r&&(c[f]=q);else if(f)for(f=0;f<a.length;f++)b[f]!=r&&1===O(g,b[f])&&(c[f]=g);else for(f=1;f<a.length;f++)1===h[f]&&(c[f]=d);return e?(this.e++,this.a&&this.a.push(g),c):{continuePrimary:c}};na("ydn.db.Storage",Sg);na("ydn.db.algo.NestedLoop",Tg);na("ydn.db.algo.ZigzagMerge",Ug);na("ydn.db.algo.SortedMerge",Vg);G.prototype.done=G.prototype.S;G.prototype.fail=G.prototype.Mb;G.prototype.then=G.prototype.B;G.prototype.always=G.prototype.jc;vc.prototype.addEventListener=vc.prototype.rc;na("ydn.db.con.Storage",W);W.prototype.getType=W.prototype.f;W.prototype.setName=W.prototype.Ub;W.prototype.getName=W.prototype.getName;W.prototype.getSchema=W.prototype.yc;W.prototype.transaction=W.prototype.transaction;W.prototype.close=W.prototype.sc;na("ydn.db.version","0.6.6");
na("ydn.db.deleteDatabase",function(a,b){Id&&((!b||"indexeddb"==b)&&Id&&"deleteDatabase"in Id)&&Id.deleteDatabase(a);ea(z.openDatabase)&&(!b||"websql"==b)&&Zd(a);(!b||"localstorage"==b)&&Ke(a);(!b||"sessionstorage"==b)&&Me(a)});Zf.prototype.name=Zf.prototype.name;Zf.prototype.getVersion=Zf.prototype.Qc;Zf.prototype.getOldVersion=Zf.prototype.nc;Zf.prototype.getError=Zf.prototype.Pc;ug.prototype.branch=ug.prototype.ic;ug.prototype.run=ug.prototype.xc;Pf.prototype.abort=Pf.prototype.d;ug.prototype.abort=ug.prototype.Rc;$.prototype.branch=$.prototype.ic;$.prototype.add=$.prototype.jb;$.prototype.get=$.prototype.ra;$.prototype.values=$.prototype.A;$.prototype.put=$.prototype.sa;$.prototype.clear=$.prototype.clear;$.prototype.remove=$.prototype.kb;$.prototype.count=$.prototype.count;Z.prototype.add=Z.prototype.jb;Z.prototype.get=Z.prototype.ra;Z.prototype.values=Z.prototype.A;Z.prototype.put=Z.prototype.sa;Z.prototype.clear=Z.prototype.clear;Z.prototype.remove=Z.prototype.kb;Z.prototype.count=Z.prototype.count;
na("ydn.db.cmp",O);na("ydn.db.Key",zc);zc.prototype.id=zc.prototype.mc;zc.prototype.parent=zc.prototype.Kc;zc.prototype.storeName=zc.prototype.Lc;na("ydn.db.KeyRange",M);M.upperBound=Ec;M.lowerBound=Fc;M.bound=Dc;M.only=Cc;M.starts=Gc;Yf.prototype.store_name=Yf.prototype.c;Yf.prototype.getStoreName=Yf.prototype.e;Tf.prototype.name=Tf.prototype.name;Tf.prototype.getKey=Tf.prototype.f;Tf.prototype.getValue=Tf.prototype.k;Rf.prototype.name=Rf.prototype.name;Rf.prototype.getKeys=Rf.prototype.$;
Rf.prototype.getValues=Rf.prototype.Va;wg.prototype.scan=wg.prototype.Oc;wg.prototype.map=wg.prototype.map;wg.prototype.reduce=wg.prototype.ib;wg.prototype.open=wg.prototype.Nc;Xf.prototype.scan=Xf.prototype.bc;Xf.prototype.map=Xf.prototype.map;Xf.prototype.reduce=Xf.prototype.ib;Xf.prototype.open=Xf.prototype.ac;Ne.prototype.getKey=Ne.prototype.$b;Ne.prototype.getPrimaryKey=Ne.prototype.L;Ne.prototype.getValue=Ne.prototype.X;Ne.prototype.update=Ne.prototype.update;Ne.prototype.clear=Ne.prototype.clear;na("ydn.math.Expression",xg);
xg.prototype.evaluate=xg.prototype.b;xg.prototype.compile=xg.prototype.c;xg.parseRpn=function(a){return new xg(a.match(/[^\s"']+|"[^"]*"|'[^']*'/g))};xg.parseInfix=function(){k(new sd("Too lazy to learn Dutch in Shunting Yard station, we speak Polish here."))};na("ydn.db.Iterator",V);na("ydn.db.KeyCursors",Ue);na("ydn.db.ValueCursors",We);na("ydn.db.Cursors",Ve);na("ydn.db.IndexValueCursors",Xe);V.prototype.count=V.prototype.count;V.prototype.getState=V.prototype.Pb;V.prototype.getKeyRange=V.prototype.Ec;
V.prototype.getIndexName=V.prototype.N;V.prototype.getStoreName=V.prototype.Gc;V.prototype.isReversed=V.prototype.fb;V.prototype.isUnique=V.prototype.Ga;V.prototype.isKeyIterator=V.prototype.Hc;V.prototype.isIndexIterator=V.prototype.oc;V.prototype.getPrimaryKey=V.prototype.Fc;V.prototype.getKey=V.prototype.Dc;V.prototype.resume=V.prototype.wc;V.prototype.reset=V.prototype.Ic;V.prototype.restrict=V.prototype.vc;V.prototype.reverse=V.prototype.Jc;
Ue.where=function(a,b,c,d,e){return new Ue(a,Mc(b,c,d,e))};We.where=function(a,b,c,d,e){return new We(a,Mc(b,c,d,e))};Ve.where=function(a,b,c,d,e,f){return new Ve(a,b,Mc(c,d,e,f))};Xe.where=function(a,b,c,d,e,f){return new Xe(a,b,Mc(c,d,e,f))};na("ydn.db.Streamer",df);df.prototype.push=df.prototype.push;df.prototype.collect=df.prototype.Mc;df.prototype.setSink=df.prototype.Ac;})();
